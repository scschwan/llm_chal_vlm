# ê´€ë¦¬ì í˜ì´ì§€ ê°œë°œ Scope ë° ì•„í‚¤í…ì²˜ (v3.1)

**ì‘ì„±ì¼**: 2025-11-14  
**ë²„ì „**: 3.1  
**ê¸°ì¤€**: LLM_í™”ë©´_ê°œë°œ_ê°€ì´ë“œ_ver_1_3.xlsx  
**ê°±ì‹  ë‚´ì—­**: Phase 1 ë‹¬ì„± í˜„í™© ì¶”ê°€


---

## ëª©ì°¨

1. [ê°œë°œ ê°œìš”](#1-ê°œë°œ-ê°œìš”)
2. [í™”ë©´ êµ¬ì„± ë° ë„¤ë¹„ê²Œì´ì…˜](#2-í™”ë©´-êµ¬ì„±-ë°-ë„¤ë¹„ê²Œì´ì…˜)
3. [ê´€ë¦¬ì í™”ë©´ ìƒì„¸ ì„¤ê³„](#3-ê´€ë¦¬ì-í™”ë©´-ìƒì„¸-ì„¤ê³„)
4. [Object Storage ì—°ë™](#4-object-storage-ì—°ë™)
5. [API ì„¤ê³„](#5-api-ì„¤ê³„)
6. [ê°œë°œ ìš°ì„ ìˆœìœ„](#6-ê°œë°œ-ìš°ì„ ìˆœìœ„)
7. [Phase 1 ë‹¬ì„± í˜„í™©](#7-phase-1-ë‹¬ì„±-í˜„í™©) â­ ì‹ ê·œ ì¶”ê°€

---

## 1. ê°œë°œ ê°œìš”

### 1.1 ê°œë°œ ë²”ìœ„

**ê¸°ì¤€ ë¬¸ì„œ**: LLM_í™”ë©´_ê°œë°œ_ê°€ì´ë“œ_ver_1_3.xlsx

#### í•µì‹¬ ê¸°ëŠ¥ (PoC ë‹¨ê³„ í•„ìˆ˜ êµ¬í˜„)
1. ì •ìƒ ì´ë¯¸ì§€ ë“±ë¡
2. ë¶ˆëŸ‰ ì´ë¯¸ì§€ ë“±ë¡
3. ëŒ€ì‘ ë§¤ë‰´ì–¼ ë“±ë¡
4. ì´ë¯¸ì§€ ë¹„êµ ë° ì°¨ì´ ì‹œê°í™” âœ… (ì‘ì—…ì í˜ì´ì§€ ì™„ë£Œ)
5. ëŒ€ì‘ ë§¤ë‰´ì–¼ ë§¤ì¹­ ë° ì‹œê°í™” âœ… (ì‘ì—…ì í˜ì´ì§€ ì™„ë£Œ)
6. LLM ê¸°ë°˜ ì¡°ì¹˜ì‚¬í•­ ì•ˆë‚´ âœ… (ì‘ì—…ì í˜ì´ì§€ ì™„ë£Œ)

#### ë¹„í•µì‹¬ ê¸°ëŠ¥ (ì¶”í›„ ê²€í† )
1. ì‚¬ìš©ìë³„ ê³„ì • ê´€ë¦¬
2. ì—…ì²´ë³„ í”„ë¡œì íŠ¸ ê´€ë¦¬
3. ë¡œê·¸ ë¶„ì„

### 1.2 ì‘ì—…ì í˜ì´ì§€ í˜„í™©

**ê°œë°œ ì™„ë£Œ ìƒíƒœ**: ì‘ì—…ì í˜ì´ì§€ëŠ” 4ê°œ íƒ­ ëª¨ë‘ ê°œë°œ ì™„ë£Œ
- âœ… ì´ë¯¸ì§€ ì—…ë¡œë“œ
- âœ… ìœ ì‚¬ë„ ê²€ìƒ‰ (TOP-K)
- âœ… ì´ìƒ ê²€ì¶œ (PatchCore)
- âœ… ëŒ€ì‘ ë§¤ë‰´ì–¼ ìƒì„± (RAG + LLM)

**í–¥í›„ ì‘ì—…**: ë””ë²„ê¹… ì™¸ ì¶”ê°€ ê°œì„ ì‚¬í•­ ì—†ìŒ

### 1.3 ê´€ë¦¬ì ì‹œë‚˜ë¦¬ì˜¤

1. ì œí’ˆ ë“±ë¡
2. ë§¤ë‰´ì–¼ ë¬¸ì„œ ë“±ë¡
3. ì œí’ˆ ë¶ˆëŸ‰ ëª©ë¡ ë“±ë¡
4. ì œí’ˆë³„ ì •ìƒ ì´ë¯¸ì§€ ë°ì´í„° ë“±ë¡
5. ì œí’ˆë³„ ë¶ˆëŸ‰ ì´ë¯¸ì§€ ë°ì´í„° ë“±ë¡
6. (ì„œë²„ë°°í¬) ìœ ì‚¬ì´ë¯¸ì§€ ê²€ì¶œ(CLIP) ì´ë¯¸ì§€ ì„ë² ë”© ì¬êµ¬ì¶•
7. (ì„œë²„ë°°í¬) ì´ìƒ ì˜ì—­ ê²€ì¶œ(PatchCore) ë©”ëª¨ë¦¬ë±…í¬ ìƒì„±
8. ì´ë¯¸ì§€ ì „ì²˜ë¦¬ ëª¨ë“ˆ ì„¤ì •
9. í†µí•© ëŒ€ì‹œë³´ë“œ/ëª¨ë‹ˆí„°ë§

---

## 2. í™”ë©´ êµ¬ì„± ë° ë„¤ë¹„ê²Œì´ì…˜

### 2.1 ì „ì²´ í™”ë©´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ê´€ë¦¬ì í˜ì´ì§€                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ì¢Œì¸¡ ë„¤ë¹„ê²Œì´ì…˜  â”‚            ë©”ì¸ ì»¨í…ì¸  ì˜ì—­              â”‚â”‚
â”‚  â”‚                  â”‚                                          â”‚â”‚
â”‚  â”‚  ëŒ€ë©”ë‰´          â”‚                                          â”‚â”‚
â”‚  â”‚  â”œâ”€ ì¤‘ë©”ë‰´1      â”‚                                          â”‚â”‚
â”‚  â”‚  â”‚  â”œâ”€ ì†Œë©”ë‰´1   â”‚         (ì„ íƒëœ í™”ë©´ í‘œì‹œ)               â”‚â”‚
â”‚  â”‚  â”‚  â””â”€ ì†Œë©”ë‰´2   â”‚                                          â”‚â”‚
â”‚  â”‚  â”œâ”€ ì¤‘ë©”ë‰´2      â”‚                                          â”‚â”‚
â”‚  â”‚  â”‚  â”œâ”€ ì†Œë©”ë‰´1   â”‚                                          â”‚â”‚
â”‚  â”‚  â”‚  â””â”€ ì†Œë©”ë‰´2   â”‚                                          â”‚â”‚
â”‚  â”‚  â””â”€ ...          â”‚                                          â”‚â”‚
â”‚  â”‚                  â”‚                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š í†µí•© ëŒ€ì‹œë³´ë“œ                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¦ ì œí’ˆ/ë§¤ë‰´ì–¼ ë“±ë¡                      â”‚
â”‚   â”œâ”€ ì œí’ˆ ê´€ë¦¬                          â”‚
â”‚   â”œâ”€ ë§¤ë‰´ì–¼ ê´€ë¦¬                        â”‚
â”‚   â””â”€ ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ–¼ï¸ ì´ë¯¸ì§€ ë“±ë¡ ê´€ë¦¬                     â”‚
â”‚   â”œâ”€ ì •ìƒ ì´ë¯¸ì§€ ë“±ë¡                   â”‚
â”‚   â””â”€ ë¶ˆëŸ‰ ì´ë¯¸ì§€ ë“±ë¡                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš™ï¸ ì‹œìŠ¤í…œ ì„¤ì •                          â”‚
â”‚   â”œâ”€ ì´ë¯¸ì§€ ì „ì²˜ë¦¬ ì„¤ì •                 â”‚
â”‚   â””â”€ ëª¨ë¸ ì„ íƒ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸš€ ì„œë²„ ë°°í¬                            â”‚
â”‚   â”œâ”€ CLIP ì„ë² ë”© ì¬êµ¬ì¶•                 â”‚
â”‚   â””â”€ PatchCore ë©”ëª¨ë¦¬ë±…í¬ ìƒì„±          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 í™”ë©´ ëª©ë¡

| ì¤‘ë©”ë‰´               | ì†Œë©”ë‰´                    | íŒŒì¼ëª…                        | ì„¤ëª…                          |
|---------------------|--------------------------|------------------------------|-------------------------------|
| -                   | í†µí•© ëŒ€ì‹œë³´ë“œ             | `admin_dashboard.html`        | ì‹œìŠ¤í…œ ì „ì²´ í˜„í™©              |
| ì œí’ˆ/ë§¤ë‰´ì–¼ ë“±ë¡     | ì œí’ˆ ê´€ë¦¬                | `admin_product.html`          | ì œí’ˆ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ           |
| ì œí’ˆ/ë§¤ë‰´ì–¼ ë“±ë¡     | ë§¤ë‰´ì–¼ ê´€ë¦¬              | `admin_manual.html`           | ë§¤ë‰´ì–¼ íŒŒì¼ ì—…ë¡œë“œ/ê´€ë¦¬       |
| ì œí’ˆ/ë§¤ë‰´ì–¼ ë“±ë¡     | ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬           | `admin_defect_type.html`      | ë¶ˆëŸ‰ ìœ í˜• ë“±ë¡/ìˆ˜ì •           |
| ì´ë¯¸ì§€ ë“±ë¡ ê´€ë¦¬     | ì •ìƒ ì´ë¯¸ì§€ ë“±ë¡         | `admin_image_normal.html`     | ì •ìƒ ì´ë¯¸ì§€ ì—…ë¡œë“œ            |
| ì´ë¯¸ì§€ ë“±ë¡ ê´€ë¦¬     | ë¶ˆëŸ‰ ì´ë¯¸ì§€ ë“±ë¡         | `admin_image_defect.html`     | ë¶ˆëŸ‰ ì´ë¯¸ì§€ ì—…ë¡œë“œ            |
| ì‹œìŠ¤í…œ ì„¤ì •         | ì´ë¯¸ì§€ ì „ì²˜ë¦¬ ì„¤ì •        | `admin_preprocessing.html`    | ì „ì²˜ë¦¬ ëª¨ë“ˆ ì„¤ì •              |
| ì‹œìŠ¤í…œ ì„¤ì •         | ëª¨ë¸ ì„ íƒ                | `admin_model.html`            | AI ëª¨ë¸ ì„ íƒ                  |
| ì„œë²„ ë°°í¬           | CLIP ì„ë² ë”© ì¬êµ¬ì¶•       | `admin_deploy_clip.html`      | CLIP ì¸ë±ìŠ¤ ìƒì„±              |
| ì„œë²„ ë°°í¬           | PatchCore ë©”ëª¨ë¦¬ë±…í¬ ìƒì„± | `admin_deploy_patchcore.html` | PatchCore í•™ìŠµ                |

**ì´ 10ê°œ í™”ë©´** (1ê°œ ëŒ€ì‹œë³´ë“œ + 9ê°œ ê´€ë¦¬ í™”ë©´)

---

## 3. ê´€ë¦¬ì í™”ë©´ ìƒì„¸ ì„¤ê³„

### 3.1 í†µí•© ëŒ€ì‹œë³´ë“œ

**íŒŒì¼ëª…**: `admin_dashboard.html`  
**API**: `/api/admin/dashboard`  
**ë„¤ë¹„ê²Œì´ì…˜**: ëŒ€ë©”ë‰´ (ìµœìƒìœ„)

#### ê¸°ëŠ¥
1. **ë“±ë¡ ë°ì´í„°ì…‹ ëª¨ë‹ˆí„°ë§**
   - ì œí’ˆë³„ ì •ìƒ ì´ë¯¸ì§€ ìˆ˜
   - ë¶ˆëŸ‰ë³„ ì´ë¯¸ì§€ ìˆ˜

2. **ê²€ì‚¬ ìˆ˜, ë¶ˆëŸ‰ ê°ì§€ ìˆ˜, ì¡°ì¹˜ ìˆ˜**
   - ì „ì²´ ê²€ì‚¬ ê±´ìˆ˜
   - ë¶ˆëŸ‰ ê°ì§€ ê±´ìˆ˜
   - ì¡°ì¹˜ ì™„ë£Œ ê±´ìˆ˜

3. **ì¡°ì¹˜ ì™„ë£Œ ì‚¬í•­ / ë¯¸ì¡°ì¹˜ ì‚¬í•­ ë¦¬ìŠ¤íŠ¸ì—…**
   - ìµœê·¼ 10ê±´ í‘œì‹œ

#### í™”ë©´ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í†µí•© ëŒ€ì‹œë³´ë“œ                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ ì´ ì œí’ˆ ìˆ˜   â”‚ â”‚ ì´ ê²€ì‚¬ ìˆ˜   â”‚ â”‚ ë¶ˆëŸ‰ ê°ì§€ ìˆ˜ â”‚â”‚
â”‚ â”‚    4 ê°œ      â”‚ â”‚   1,245 ê±´   â”‚ â”‚   127 ê±´     â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ì œí’ˆë³„ ë°ì´í„°ì…‹ í˜„í™©                          â”‚  â”‚
â”‚ â”‚                                              â”‚  â”‚
â”‚ â”‚ ì œí’ˆ     ì •ìƒì´ë¯¸ì§€  ë¶ˆëŸ‰ì´ë¯¸ì§€  ë§¤ë‰´ì–¼      â”‚  â”‚
â”‚ â”‚ prod1      150       45        ë“±ë¡ì™„ë£Œ      â”‚  â”‚
â”‚ â”‚ leather    200       80        ë“±ë¡ì™„ë£Œ      â”‚  â”‚
â”‚ â”‚ grid       180       60        ë“±ë¡ì™„ë£Œ      â”‚  â”‚
â”‚ â”‚ carpet     120       40        ë“±ë¡ì™„ë£Œ      â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ë¶ˆëŸ‰ ìœ í˜•ë³„ ê²€ì¶œ í˜„í™© (ìµœê·¼ 30ì¼)             â”‚  â”‚
â”‚ â”‚                                              â”‚  â”‚
â”‚ â”‚  [ë§‰ëŒ€ê·¸ë˜í”„]                                â”‚  â”‚
â”‚ â”‚   hole: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 45ê±´                        â”‚  â”‚
â”‚ â”‚   burr: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 30ê±´                          â”‚  â”‚
â”‚ â”‚   scratch: â–ˆâ–ˆâ–ˆâ–ˆ 20ê±´                         â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ìµœê·¼ ê²€ì‚¬ ì´ë ¥ (10ê±´)                         â”‚  â”‚
â”‚ â”‚                                              â”‚  â”‚
â”‚ â”‚ ì‹œê°„         ì œí’ˆ   ë¶ˆëŸ‰ìœ í˜•  ì¡°ì¹˜ìƒíƒœ       â”‚  â”‚
â”‚ â”‚ 11-13 15:30  prod1  hole     ì™„ë£Œ   [ìƒì„¸]   â”‚  â”‚
â”‚ â”‚ 11-13 15:25  prod1  burr     ì™„ë£Œ   [ìƒì„¸]   â”‚  â”‚
â”‚ â”‚ 11-13 15:20  leather scratch  ë¯¸ì™„ë£Œ [ìƒì„¸]   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### DB ì—°ë™
- **products, images, search_history, response_history í…Œì´ë¸”**: í†µê³„ ë°ì´í„° ì¡°íšŒ

---

### 3.2 ì œí’ˆ ê´€ë¦¬

**íŒŒì¼ëª…**: `admin_product.html`  
**API**: `/api/admin/product`  
**ë„¤ë¹„ê²Œì´ì…˜**: ì œí’ˆ/ë§¤ë‰´ì–¼ ë“±ë¡ > ì œí’ˆ ê´€ë¦¬

#### ê¸°ëŠ¥
1. **ì œí’ˆ ë“±ë¡**
   - ì œí’ˆëª… ì…ë ¥
   - ì œí’ˆ ì½”ë“œ ìë™ ìƒì„± or ìˆ˜ë™ ì…ë ¥
   - ì œí’ˆ ì„¤ëª… ì…ë ¥

2. **ì œí’ˆ ëª©ë¡ ì¡°íšŒ**
   - ë“±ë¡ëœ ì œí’ˆ ëª©ë¡ í…Œì´ë¸” í˜•íƒœë¡œ í‘œì‹œ

3. **ì œí’ˆ ìˆ˜ì •/ì‚­ì œ**
   - ê¸°ì¡´ ì œí’ˆ ì •ë³´ ìˆ˜ì •
   - ì œí’ˆ ì‚­ì œ (ë¹„í™œì„±í™”)

#### í™”ë©´ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì œí’ˆ ê´€ë¦¬                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ì‹ ê·œ ì œí’ˆ ë“±ë¡                                 â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì œí’ˆ ì½”ë“œ: [____________]                      â”‚ â”‚
â”‚ â”‚ ì œí’ˆëª…:    [__________________________]        â”‚ â”‚
â”‚ â”‚ ì„¤ëª…:                                          â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚ â”‚                                          â”‚  â”‚ â”‚
â”‚ â”‚ â”‚                                          â”‚  â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ [ë“±ë¡]                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ë“±ë¡ëœ ì œí’ˆ ëª©ë¡                               â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ID  ì œí’ˆì½”ë“œ   ì œí’ˆëª…      ë“±ë¡ì¼    ìƒíƒœ  [ìˆ˜ì •]â”‚ â”‚
â”‚ â”‚  1  prod1     ì£¼ì¡°Aí˜•   2025-11-01  í™œì„±  [ìˆ˜ì •]â”‚ â”‚
â”‚ â”‚  2  leather   ê°€ì£½ì œí’ˆ  2025-11-02  í™œì„±  [ìˆ˜ì •]â”‚ â”‚
â”‚ â”‚  3  grid      ê·¸ë¦¬ë“œ    2025-11-03  í™œì„±  [ìˆ˜ì •]â”‚ â”‚
â”‚ â”‚  4  carpet    ì¹´í«      2025-11-04  í™œì„±  [ìˆ˜ì •]â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### DB ì—°ë™
- **products í…Œì´ë¸”**: ì œí’ˆ ì •ë³´ ê´€ë¦¬

---

### 3.3 ë§¤ë‰´ì–¼ ê´€ë¦¬

**íŒŒì¼ëª…**: `admin_manual.html`  
**API**: `/api/admin/manual`  
**ë„¤ë¹„ê²Œì´ì…˜**: ì œí’ˆ/ë§¤ë‰´ì–¼ ë“±ë¡ > ë§¤ë‰´ì–¼ ê´€ë¦¬

#### ê¸°ëŠ¥
1. **ë§¤ë‰´ì–¼ íŒŒì¼ ì—…ë¡œë“œ (PDF)**
   - ì œí’ˆ ì„ íƒ (ë“œë¡­ë‹¤ìš´)
   - PDF íŒŒì¼ ì—…ë¡œë“œ
   - **Object Storage ì—…ë¡œë“œ**

2. **ë§¤ë‰´ì–¼ ëª©ë¡ ì¡°íšŒ**
   - ì œí’ˆë³„ ë§¤ë‰´ì–¼ íŒŒì¼ ëª©ë¡
   - ì¸ë±ì‹± ìƒíƒœ í‘œì‹œ

3. **ë§¤ë‰´ì–¼ ë‹¤ìš´ë¡œë“œ/ì‚­ì œ**
   - **Object Storageì—ì„œ ë‹¤ìš´ë¡œë“œ**
   - ë§¤ë‰´ì–¼ ì‚­ì œ

#### í™”ë©´ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë§¤ë‰´ì–¼ ê´€ë¦¬                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ë§¤ë‰´ì–¼ íŒŒì¼ ì—…ë¡œë“œ                             â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì œí’ˆ ì„ íƒ: [prod1 - ì£¼ì¡°Aí˜• â–¼]                 â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ íŒŒì¼ ì„ íƒ: [íŒŒì¼ ì„ íƒ...] (PDFë§Œ ê°€ëŠ¥)         â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ [ì—…ë¡œë“œ]                                       â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì—…ë¡œë“œ ì§„í–‰: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 60%          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ë“±ë¡ëœ ë§¤ë‰´ì–¼ ëª©ë¡                             â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì œí’ˆ   íŒŒì¼ëª…            í¬ê¸°   ì¸ë±ì‹±  [ì•¡ì…˜]  â”‚ â”‚
â”‚ â”‚ prod1  prod1_manual.pdf  2.3MB  ì™„ë£Œ   [ë‹¤ìš´ë¡œë“œ]â”‚ â”‚
â”‚ â”‚ leather leather_manual.pdf 3.1MB ì™„ë£Œ  [ë‹¤ìš´ë¡œë“œ]â”‚ â”‚
â”‚ â”‚ grid   grid_manual.pdf   1.8MB  ë¯¸ì™„ë£Œ [ë‹¤ìš´ë¡œë“œ]â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â€» ë§¤ë‰´ì–¼ íŒŒì¼ì€ Object Storageì— ì €ì¥ë©ë‹ˆë‹¤.      â”‚
â”‚ â€» ì¸ë±ì‹±ì€ ì„œë²„ ë°°í¬ ë©”ë‰´ì—ì„œ ìˆ˜í–‰í•©ë‹ˆë‹¤.          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Object Storage ì—°ë™
- **ì—…ë¡œë“œ ê²½ë¡œ**: `s3://{BUCKET}/manuals/{product_code}/{filename}`
- **ë‹¤ìš´ë¡œë“œ**: boto3.client.download_file()
- **ì°¸ê³  ì½”ë“œ**: `ncp_obj_public_get_test.py`

#### DB ì—°ë™
- **manuals í…Œì´ë¸”**: ë§¤ë‰´ì–¼ íŒŒì¼ ì •ë³´ ì €ì¥
  - `file_path`: Object Storage ê²½ë¡œ ì €ì¥

---

### 3.4 ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬

**íŒŒì¼ëª…**: `admin_defect_type.html`  
**API**: `/api/admin/defect-type`  
**ë„¤ë¹„ê²Œì´ì…˜**: ì œí’ˆ/ë§¤ë‰´ì–¼ ë“±ë¡ > ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬

#### ê¸°ëŠ¥
1. **ë¶ˆëŸ‰ ìœ í˜• ë“±ë¡**
   - ì œí’ˆ ì„ íƒ
   - ë¶ˆëŸ‰ëª…(í•œê¸€) ì…ë ¥
   - ë§¤í•‘ëª…(ì˜ë¬¸) ì…ë ¥
   - ì„¤ëª… ì…ë ¥

2. **ë¶ˆëŸ‰ ìœ í˜• ëª©ë¡ ì¡°íšŒ**
   - ì œí’ˆë³„ ë¶ˆëŸ‰ ìœ í˜• ëª©ë¡

3. **ë¶ˆëŸ‰ ìœ í˜• ìˆ˜ì •/ì‚­ì œ**
   - ê¸°ì¡´ ë¶ˆëŸ‰ ìœ í˜• ì •ë³´ ìˆ˜ì •
   - ë¶ˆëŸ‰ ìœ í˜• ì‚­ì œ (ë¹„í™œì„±í™”)

#### í™”ë©´ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ì‹ ê·œ ë¶ˆëŸ‰ ìœ í˜• ë“±ë¡                            â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì œí’ˆ ì„ íƒ:    [prod1 - ì£¼ì¡°Aí˜• â–¼]              â”‚ â”‚
â”‚ â”‚ ë¶ˆëŸ‰ëª…(í•œê¸€): [_______]  (ì˜ˆ: ê¸í˜)            â”‚ â”‚
â”‚ â”‚ ë§¤í•‘ëª…(ì˜ë¬¸): [_______]  (ì˜ˆ: scratch)         â”‚ â”‚
â”‚ â”‚ ì„¤ëª…:                                          â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚ â”‚                                          â”‚  â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ [ë“±ë¡]                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ë“±ë¡ëœ ë¶ˆëŸ‰ ìœ í˜• ëª©ë¡                          â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ í•„í„°: [ëª¨ë“  ì œí’ˆ â–¼]                            â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì œí’ˆ   ë¶ˆëŸ‰ëª…  ë§¤í•‘ëª…    ë“±ë¡ì¼    ìƒíƒœ  [ìˆ˜ì •] â”‚ â”‚
â”‚ â”‚ prod1  ì •ìƒ    normal   2025-11-01  í™œì„± [ìˆ˜ì •] â”‚ â”‚
â”‚ â”‚ prod1  ê¸°ê³µ    hole     2025-11-01  í™œì„± [ìˆ˜ì •] â”‚ â”‚
â”‚ â”‚ prod1  ë²„      burr     2025-11-01  í™œì„± [ìˆ˜ì •] â”‚ â”‚
â”‚ â”‚ prod1  ê¸í˜    scratch  2025-11-01  í™œì„± [ìˆ˜ì •] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### DB ì—°ë™
- **defect_types í…Œì´ë¸”**: ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬

---

### 3.5 ì •ìƒ ì´ë¯¸ì§€ ë“±ë¡

**íŒŒì¼ëª…**: `admin_image_normal.html`  
**API**: `/api/admin/image/normal`  
**ë„¤ë¹„ê²Œì´ì…˜**: ì´ë¯¸ì§€ ë“±ë¡ ê´€ë¦¬ > ì •ìƒ ì´ë¯¸ì§€ ë“±ë¡

#### ê¸°ëŠ¥
1. **ì •ìƒ ì´ë¯¸ì§€ ì—…ë¡œë“œ**
   - ì œí’ˆ ì„ íƒ
   - ì´ë¯¸ì§€ íŒŒì¼ (jpg, jpeg, png) ë˜ëŠ” ZIP íŒŒì¼ ì—…ë¡œë“œ
   - ë‹¤ì¤‘ íŒŒì¼ ì„ íƒ ê°€ëŠ¥
   - **Object Storage ì—…ë¡œë“œ**

2. **ì—…ë¡œë“œ ì§„í–‰ë¥  í‘œì‹œ**
   - ì‹¤ì‹œê°„ ì—…ë¡œë“œ ì§„í–‰ë¥ 

3. **ë“±ë¡ëœ ì •ìƒ ì´ë¯¸ì§€ ëª©ë¡**
   - ì¸ë„¤ì¼ í‘œì‹œ
   - ì‚­ì œ ê¸°ëŠ¥

#### í™”ë©´ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì •ìƒ ì´ë¯¸ì§€ ë“±ë¡                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ì´ë¯¸ì§€ ì—…ë¡œë“œ                                  â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì œí’ˆ ì„ íƒ: [prod1 - ì£¼ì¡°Aí˜• â–¼]                 â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ íŒŒì¼ ì„ íƒ: [íŒŒì¼ ì„ íƒ...] (jpg, png, zip)      â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ [ì—…ë¡œë“œ]                                       â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì—…ë¡œë“œ ì§„í–‰: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 80%          â”‚ â”‚
â”‚ â”‚ (5/10 íŒŒì¼ ì™„ë£Œ)                               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ë“±ë¡ëœ ì •ìƒ ì´ë¯¸ì§€ (ì´ 150ì¥)                  â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ í•„í„°: [prod1 - ì£¼ì¡°Aí˜• â–¼]                      â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚ â”‚ â”‚[ì¸ë„¤ì¼]â”‚[ì¸ë„¤ì¼]â”‚[ì¸ë„¤ì¼]â”‚[ì¸ë„¤ì¼]â”‚        â”‚ â”‚
â”‚ â”‚ â”‚ 001.jpgâ”‚ 002.jpgâ”‚ 003.jpgâ”‚ 004.jpgâ”‚        â”‚ â”‚
â”‚ â”‚ â”‚ [ì‚­ì œ] â”‚ [ì‚­ì œ] â”‚ [ì‚­ì œ] â”‚ [ì‚­ì œ] â”‚        â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚ â”‚
â”‚ â”‚ â”‚[ì¸ë„¤ì¼]â”‚[ì¸ë„¤ì¼]â”‚[ì¸ë„¤ì¼]â”‚[ì¸ë„¤ì¼]â”‚        â”‚ â”‚
â”‚ â”‚ â”‚ 005.jpgâ”‚ 006.jpgâ”‚ 007.jpgâ”‚ 008.jpgâ”‚        â”‚ â”‚
â”‚ â”‚ â”‚ [ì‚­ì œ] â”‚ [ì‚­ì œ] â”‚ [ì‚­ì œ] â”‚ [ì‚­ì œ] â”‚        â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â€» ì´ë¯¸ì§€ëŠ” Object Storageì— ì—…ë¡œë“œë©ë‹ˆë‹¤.          â”‚
â”‚ â€» ì—…ë¡œë“œ ì™„ë£Œ í›„ ì„œë²„ ë°°í¬ë¥¼ ìˆ˜í–‰í•´ì•¼ ì¸ë±ì‹±ë©ë‹ˆë‹¤. â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Object Storage ì—°ë™
- **ì—…ë¡œë“œ ê²½ë¡œ**: `s3://{BUCKET}/images/normal/{product_code}/{filename}`
- **ì—…ë¡œë“œ**: boto3.client.upload_file()
- **ì°¸ê³  ì½”ë“œ**: `ncp_obj_public_get_test.py` (ë‹¤ìš´ë¡œë“œ ì½”ë“œ ì°¸ê³ í•˜ì—¬ ì—…ë¡œë“œ êµ¬í˜„)

#### DB ì—°ë™
- **images í…Œì´ë¸”**: 
  - `image_type`: 'normal'
  - `file_path`: Object Storage ê²½ë¡œ ì €ì¥

---

### 3.6 ë¶ˆëŸ‰ ì´ë¯¸ì§€ ë“±ë¡

**íŒŒì¼ëª…**: `admin_image_defect.html`  
**API**: `/api/admin/image/defect`  
**ë„¤ë¹„ê²Œì´ì…˜**: ì´ë¯¸ì§€ ë“±ë¡ ê´€ë¦¬ > ë¶ˆëŸ‰ ì´ë¯¸ì§€ ë“±ë¡

#### ê¸°ëŠ¥
1. **ë¶ˆëŸ‰ ì´ë¯¸ì§€ ì—…ë¡œë“œ**
   - ì œí’ˆ ì„ íƒ
   - ë¶ˆëŸ‰ ìœ í˜• ì„ íƒ
   - ì´ë¯¸ì§€ íŒŒì¼ (jpg, jpeg, png) ë˜ëŠ” ZIP íŒŒì¼ ì—…ë¡œë“œ
   - ë‹¤ì¤‘ íŒŒì¼ ì„ íƒ ê°€ëŠ¥
   - **Object Storage ì—…ë¡œë“œ**

2. **íŒŒì¼ëª… ê·œì¹™ ì¤€ìˆ˜**
   - `{product_code}_{defect_code}_{ìˆœë²ˆ}.jpg`
   - ì˜ˆ: `prod1_hole_001.jpg`

3. **ë“±ë¡ëœ ë¶ˆëŸ‰ ì´ë¯¸ì§€ ëª©ë¡**
   - ë¶ˆëŸ‰ ìœ í˜•ë³„ í•„í„°ë§
   - ì¸ë„¤ì¼ í‘œì‹œ
   - ì‚­ì œ ê¸°ëŠ¥

#### í™”ë©´ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¶ˆëŸ‰ ì´ë¯¸ì§€ ë“±ë¡                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ì´ë¯¸ì§€ ì—…ë¡œë“œ                                  â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì œí’ˆ ì„ íƒ:    [prod1 - ì£¼ì¡°Aí˜• â–¼]              â”‚ â”‚
â”‚ â”‚ ë¶ˆëŸ‰ ìœ í˜• ì„ íƒ: [hole - ê¸°ê³µ â–¼]               â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ íŒŒì¼ ì„ íƒ: [íŒŒì¼ ì„ íƒ...] (jpg, png, zip)      â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ [ì—…ë¡œë“œ]                                       â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì—…ë¡œë“œ ì§„í–‰: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%         â”‚ â”‚
â”‚ â”‚ (10/10 íŒŒì¼ ì™„ë£Œ)                              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ë“±ë¡ëœ ë¶ˆëŸ‰ ì´ë¯¸ì§€                             â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì œí’ˆ í•„í„°: [prod1 â–¼]  ë¶ˆëŸ‰ ìœ í˜•: [ëª¨ë‘ â–¼]     â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ë¶ˆëŸ‰ìœ í˜•  íŒŒì¼ëª…              ë“±ë¡ì¼    [ì•¡ì…˜]  â”‚ â”‚
â”‚ â”‚ hole     prod1_hole_001.jpg  2025-11-01 [ì‚­ì œ]  â”‚ â”‚
â”‚ â”‚ hole     prod1_hole_002.jpg  2025-11-01 [ì‚­ì œ]  â”‚ â”‚
â”‚ â”‚ burr     prod1_burr_001.jpg  2025-11-01 [ì‚­ì œ]  â”‚ â”‚
â”‚ â”‚ scratch  prod1_scratch_001.jpg 2025-11-01 [ì‚­ì œ]â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â€» ì´ë¯¸ì§€ëŠ” Object Storageì— ì—…ë¡œë“œë©ë‹ˆë‹¤.          â”‚
â”‚ â€» ì—…ë¡œë“œ ì™„ë£Œ í›„ ì„œë²„ ë°°í¬ë¥¼ ìˆ˜í–‰í•´ì•¼ ì¸ë±ì‹±ë©ë‹ˆë‹¤. â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Object Storage ì—°ë™
- **ì—…ë¡œë“œ ê²½ë¡œ**: `s3://{BUCKET}/images/defect/{product_code}_{defect_code}/{filename}`
- **ì—…ë¡œë“œ**: boto3.client.upload_file()

#### DB ì—°ë™
- **images í…Œì´ë¸”**: 
  - `image_type`: 'defect'
  - `defect_type_id`: ë¶ˆëŸ‰ ìœ í˜• ID
  - `file_path`: Object Storage ê²½ë¡œ ì €ì¥

---

### 3.7 ì´ë¯¸ì§€ ì „ì²˜ë¦¬ ì„¤ì •

**íŒŒì¼ëª…**: `admin_preprocessing.html`  
**API**: `/api/admin/preprocessing`  
**ë„¤ë¹„ê²Œì´ì…˜**: ì‹œìŠ¤í…œ ì„¤ì • > ì´ë¯¸ì§€ ì „ì²˜ë¦¬ ì„¤ì •

#### ê¸°ëŠ¥
1. **ì œí’ˆë³„ ì „ì²˜ë¦¬ ì˜µì…˜ ì„ íƒ**
   - Gray Scale (í‘ë°± ë³€í™˜)
   - Contrast (ëª…ì•” ëŒ€ë¹„ ì¡°ì •)
   - Histogram Equalization (íˆìŠ¤í† ê·¸ë¨ í‰í™œí™”)
   - Smoothing (ë¸”ëŸ¬ ì²˜ë¦¬)
   - Normalize (ì •ê·œí™”)

2. **ì„¤ì • ì €ì¥**
   - ì²´í¬ë°•ìŠ¤ í˜•íƒœë¡œ Y/N ì €ì¥

3. **ì „ì²˜ë¦¬ ì„¤ì • ëª©ë¡ ì¡°íšŒ**
   - ëª¨ë“  ì œí’ˆì˜ ì „ì²˜ë¦¬ ì„¤ì • í•œëˆˆì— ë³´ê¸°

#### í™”ë©´ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì´ë¯¸ì§€ ì „ì²˜ë¦¬ ì„¤ì •                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ì œí’ˆë³„ ì „ì²˜ë¦¬ ì˜µì…˜ ì„¤ì •                        â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì œí’ˆ ì„ íƒ: [prod1 - ì£¼ì¡°Aí˜• â–¼]                 â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì „ì²˜ë¦¬ ì˜µì…˜:                                   â”‚ â”‚
â”‚ â”‚ â˜ Gray Scale (í‘ë°± ë³€í™˜)                       â”‚ â”‚
â”‚ â”‚ â˜ Contrast (ëª…ì•” ëŒ€ë¹„ ì¡°ì •)                    â”‚ â”‚
â”‚ â”‚ â˜ Histogram Equalization (íˆìŠ¤í† ê·¸ë¨ í‰í™œí™”)   â”‚ â”‚
â”‚ â”‚ â˜ Smoothing (ë¸”ëŸ¬ ì²˜ë¦¬)                        â”‚ â”‚
â”‚ â”‚ â˜ Normalize (ì •ê·œí™”)                           â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ [ì €ì¥] [ì´ˆê¸°í™”]                                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ì „ì²´ ì œí’ˆ ì „ì²˜ë¦¬ ì„¤ì • í˜„í™©                     â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì œí’ˆ   Gray  Contrast  Histogram  Smooth  Norm â”‚ â”‚
â”‚ â”‚ prod1   N      N          N         N       N  â”‚ â”‚
â”‚ â”‚ leather Y      Y          N         N       N  â”‚ â”‚
â”‚ â”‚ grid    N      N          Y         N       N  â”‚ â”‚
â”‚ â”‚ carpet  N      N          N         N       N  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ âš ï¸ ì£¼ì˜: ì „ì²˜ë¦¬ ì„¤ì • ë³€ê²½ í›„ ì„œë²„ ë°°í¬ë¥¼ ìˆ˜í–‰í•´ì•¼  â”‚
â”‚   ì‹¤ì œ ëª¨ë¸ì— ì ìš©ë©ë‹ˆë‹¤.                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### DB ì—°ë™
- **image_preprocessing í…Œì´ë¸”**: ì œí’ˆë³„ ì „ì²˜ë¦¬ ì„¤ì • ì €ì¥

---

### 3.8 ëª¨ë¸ ì„ íƒ

**íŒŒì¼ëª…**: `admin_model.html`  
**API**: `/api/admin/model`  
**ë„¤ë¹„ê²Œì´ì…˜**: ì‹œìŠ¤í…œ ì„¤ì • > ëª¨ë¸ ì„ íƒ

#### ê¸°ëŠ¥
1. **ë¶ˆëŸ‰ ê²€ì‚¬ ëª¨ë¸ ì„ íƒ**
   - PatchCore (Anomaly Detection) - í˜„ì¬ ê¸°ë³¸ê°’
   - (í–¥í›„ í™•ì¥) YOLOv8, Faster R-CNN ë“±

2. **ìœ ì‚¬ë„ ë§¤ì¹­ ëª¨ë¸ ì„ íƒ**
   - CLIP ViT-B-32 (í˜„ì¬ ê¸°ë³¸ê°’)
   - (í–¥í›„ í™•ì¥) ë‹¤ë¥¸ CLIP ëª¨ë¸

3. **ìƒì„±í˜•(GEN AI) ëª¨ë¸ ì„ íƒ**
   - Claude-3.5-Sonnet (í˜„ì¬ ê¸°ë³¸ê°’)
   - (í–¥í›„ í™•ì¥) GPT-4, Claude-3-Opus ë“±

#### í™”ë©´ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ëª¨ë¸ ì„ íƒ                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 1. ë¶ˆëŸ‰ ê²€ì‚¬ ëª¨ë¸                              â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ â— PatchCore (Anomaly Detection) - ê¶Œì¥        â”‚ â”‚
â”‚ â”‚ â—‹ YOLOv8 (Object Detection) - ì¤€ë¹„ ì¤‘         â”‚ â”‚
â”‚ â”‚ â—‹ Faster R-CNN - ì¤€ë¹„ ì¤‘                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 2. ìœ ì‚¬ë„ ë§¤ì¹­ ëª¨ë¸                            â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ â— CLIP ViT-B-32 - ê¶Œì¥                        â”‚ â”‚
â”‚ â”‚ â—‹ CLIP ViT-L-14 - ì¤€ë¹„ ì¤‘                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 3. ìƒì„±í˜• AI ëª¨ë¸                              â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ â— Claude-3.5-Sonnet (Anthropic) - ê¸°ë³¸        â”‚ â”‚
â”‚ â”‚ â—‹ Claude-3-Opus (Anthropic) - ì¤€ë¹„ ì¤‘         â”‚ â”‚
â”‚ â”‚ â—‹ GPT-4 (OpenAI) - ì¤€ë¹„ ì¤‘                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ [ì €ì¥]                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### DB ì—°ë™
- **model_params í…Œì´ë¸”**: ëª¨ë¸ ì„¤ì • ì €ì¥

---

### 3.9 CLIP ì„ë² ë”© ì¬êµ¬ì¶•

**íŒŒì¼ëª…**: `admin_deploy_clip.html`  
**API**: `/api/admin/deployment/clip`  
**ë„¤ë¹„ê²Œì´ì…˜**: ì„œë²„ ë°°í¬ > CLIP ì„ë² ë”© ì¬êµ¬ì¶•

#### ê¸°ëŠ¥
1. **ì¸ë±ìŠ¤ ìœ í˜• ì„ íƒ**
   - **ì •ìƒ ì´ë¯¸ì§€ ì¸ë±ìŠ¤**: ëª¨ë“  ì œí’ˆì˜ ì •ìƒ ì´ë¯¸ì§€ ëŒ€ìƒ
   - **ë¶ˆëŸ‰ ì´ë¯¸ì§€ ì¸ë±ìŠ¤**: ëª¨ë“  ì œí’ˆì˜ ë¶ˆëŸ‰ ì´ë¯¸ì§€ ëŒ€ìƒ

2. **ì¬êµ¬ì¶• ì‹¤í–‰**
   - ì„ íƒí•œ ì¸ë±ìŠ¤ ìœ í˜•ì— ëŒ€í•´ CLIP ì„ë² ë”© ìƒì„±
   - FAISS ì¸ë±ìŠ¤ ìƒì„±
   - **Object Storageì—ì„œ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ â†’ ë¡œì»¬ ì„œë²„ ë°°í¬ â†’ ì„ë² ë”© ìƒì„± (ë¹„ë™ê¸° ë°°ì¹˜ ì„œë¹„ìŠ¤)**

3. **ì§„í–‰ ìƒíƒœ í‘œì‹œ**
   - ì‹¤ì‹œê°„ ì§„í–‰ë¥  í‘œì‹œ
   - ì†Œìš” ì‹œê°„ í‘œì‹œ

4. **ë°°í¬ ì´ë ¥ ì¡°íšŒ**
   - ìµœê·¼ ë°°í¬ ì´ë ¥ ëª©ë¡

#### í™”ë©´ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIP ì„ë² ë”© ì¬êµ¬ì¶•                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ì¸ë±ìŠ¤ ìœ í˜• ì„ íƒ                               â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ â—‹ ì •ìƒ ì´ë¯¸ì§€ ì¸ë±ìŠ¤ (ì „ì²´ ì œí’ˆ)              â”‚ â”‚
â”‚ â”‚    - ëŒ€ìƒ: ëª¨ë“  ì œí’ˆì˜ ì •ìƒ ì´ë¯¸ì§€            â”‚ â”‚
â”‚ â”‚    - ì´ 650ì¥                                 â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ â—‹ ë¶ˆëŸ‰ ì´ë¯¸ì§€ ì¸ë±ìŠ¤ (ì „ì²´ ì œí’ˆ)              â”‚ â”‚
â”‚ â”‚    - ëŒ€ìƒ: ëª¨ë“  ì œí’ˆì˜ ë¶ˆëŸ‰ ì´ë¯¸ì§€            â”‚ â”‚
â”‚ â”‚    - ì´ 225ì¥                                 â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ [ì¬êµ¬ì¶• ì‹œì‘]                                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ì§„í–‰ ìƒíƒœ                                      â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì‘ì—…: ì •ìƒ ì´ë¯¸ì§€ ì¸ë±ìŠ¤ ì¬êµ¬ì¶•                â”‚ â”‚
â”‚ â”‚ ìƒíƒœ: ì§„í–‰ ì¤‘                                  â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 65%            â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ - Object Storage ë‹¤ìš´ë¡œë“œ ì™„ë£Œ (650/650)      â”‚ â”‚
â”‚ â”‚ - ë¡œì»¬ ì„œë²„ ë°°í¬ ì§„í–‰ ì¤‘ (420/650)            â”‚ â”‚
â”‚ â”‚ - ì„ë² ë”© ìƒì„± ëŒ€ê¸° ì¤‘                          â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ê²½ê³¼ ì‹œê°„: 2ë¶„ 15ì´ˆ                            â”‚ â”‚
â”‚ â”‚ ì˜ˆìƒ ë‚¨ì€ ì‹œê°„: ì•½ 1ë¶„                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ë°°í¬ ì´ë ¥                                      â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì¸ë±ìŠ¤ ìœ í˜•  ì‹œì‘ì‹œê°„    ì¢…ë£Œì‹œê°„   ìƒíƒœ   [ë¡œê·¸]â”‚ â”‚
â”‚ â”‚ ì •ìƒ ì´ë¯¸ì§€  11-13 14:30  14:33    ì„±ê³µ   [ë³´ê¸°]â”‚ â”‚
â”‚ â”‚ ë¶ˆëŸ‰ ì´ë¯¸ì§€  11-13 14:20  14:22    ì„±ê³µ   [ë³´ê¸°]â”‚ â”‚
â”‚ â”‚ ì •ìƒ ì´ë¯¸ì§€  11-13 13:00  ì‹¤íŒ¨     ì‹¤íŒ¨   [ë³´ê¸°]â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ âš ï¸ ì£¼ì˜ì‚¬í•­:                                       â”‚
â”‚ - ì¬êµ¬ì¶• ì¤‘ì—ëŠ” ì‘ì—…ì í˜ì´ì§€ ì‚¬ìš©ì´ ì œí•œë©ë‹ˆë‹¤.   â”‚
â”‚ - ëŒ€ìš©ëŸ‰ ì´ë¯¸ì§€ì˜ ê²½ìš° ì™„ë£Œê¹Œì§€ ìˆ˜ë¶„ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ë¹„ë™ê¸° ë°°ì¹˜ í”„ë¡œì„¸ìŠ¤
1. **Object Storage â†’ ë¡œì»¬ ì„œë²„ ë‹¤ìš´ë¡œë“œ**
   - boto3.client.download_file() ì‚¬ìš©
   - ë³‘ë ¬ ë‹¤ìš´ë¡œë“œ (ìµœëŒ€ 10ê°œ ë™ì‹œ)

2. **ë¡œì»¬ ì„œë²„ ë°°í¬**
   - ë‹¤ìš´ë¡œë“œëœ ì´ë¯¸ì§€ë¥¼ ì§€ì • ê²½ë¡œì— ë°°ì¹˜
   - `/data/patchCore/{product_code}/` (ì •ìƒ ì´ë¯¸ì§€)
   - `/data/def_split/` (ë¶ˆëŸ‰ ì´ë¯¸ì§€)

3. **ì„ë² ë”© ìƒì„±**
   - CLIP ëª¨ë¸ ë¡œë“œ
   - ë°°ì¹˜ ë‹¨ìœ„ ì„ë² ë”© ìƒì„±
   - FAISS ì¸ë±ìŠ¤ ì €ì¥

4. **ì§„í–‰ ìƒíƒœ ì—…ë°ì´íŠ¸**
   - Redis ë˜ëŠ” DBì— ì§„í–‰ ìƒíƒœ ì €ì¥
   - WebSocketìœ¼ë¡œ ì‹¤ì‹œê°„ ì§„í–‰ë¥  ì „ë‹¬

#### DB ì—°ë™
- **deployment_logs í…Œì´ë¸”**: ë°°í¬ ì´ë ¥ ì €ì¥
  - `task_type`: 'clip_normal' ë˜ëŠ” 'clip_defect'

---

### 3.10 PatchCore ë©”ëª¨ë¦¬ë±…í¬ ìƒì„±

**íŒŒì¼ëª…**: `admin_deploy_patchcore.html`  
**API**: `/api/admin/deployment/patchcore`  
**ë„¤ë¹„ê²Œì´ì…˜**: ì„œë²„ ë°°í¬ > PatchCore ë©”ëª¨ë¦¬ë±…í¬ ìƒì„±

#### ê¸°ëŠ¥
1. **ì „ì²´ ë©”ëª¨ë¦¬ë±…í¬ ì¬ìƒì„±**
   - ëª¨ë“  ì œí’ˆì˜ ë©”ëª¨ë¦¬ë±…í¬ë¥¼ ì¼ê´„ ì¬ìƒì„±
   - ì œí’ˆë³„ ì„ íƒ ë¶ˆê°€ (ì „ì²´ ì¼ê´„ ì²˜ë¦¬)

2. **ë©”ëª¨ë¦¬ë±…í¬ ìƒì„± ì‹¤í–‰**
   - ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰: `/home/dmillion/llm_chal_vlm/build_patchcore.sh`
   - `/data/patchCore/` í•˜ìœ„ ëª¨ë“  ì œí’ˆ í´ë”ì˜ ì •ìƒ ì´ë¯¸ì§€(`*/ok`) ê¸°ì¤€ìœ¼ë¡œ ìƒì„±
   - **Object Storage ì—°ë™ ë¶ˆí•„ìš”** (ë¡œì»¬ ì´ë¯¸ì§€ ê¸°ë°˜)

3. **ì§„í–‰ ìƒíƒœ í‘œì‹œ**
   - ì‹¤ì‹œê°„ ì§„í–‰ë¥  í‘œì‹œ
   - ì†Œìš” ì‹œê°„ í‘œì‹œ

4. **ë°°í¬ ì´ë ¥ ì¡°íšŒ**
   - ì „ì²´ ë©”ëª¨ë¦¬ë±…í¬ ìƒì„± ì´ë ¥ ëª©ë¡

#### í™”ë©´ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PatchCore ë©”ëª¨ë¦¬ë±…í¬ ìƒì„±                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ì „ì²´ ë©”ëª¨ë¦¬ë±…í¬ ì¬ìƒì„±                         â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ëŒ€ìƒ: ëª¨ë“  ì œí’ˆì˜ ì •ìƒ ì´ë¯¸ì§€                  â”‚ â”‚
â”‚ â”‚ ê²½ë¡œ: /data/patchCore/*/ok                     â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì œí’ˆ ëª©ë¡:                                     â”‚ â”‚
â”‚ â”‚ - prod1: 150ì¥                                 â”‚ â”‚
â”‚ â”‚ - leather: 200ì¥                               â”‚ â”‚
â”‚ â”‚ - grid: 180ì¥                                  â”‚ â”‚
â”‚ â”‚ - carpet: 120ì¥                                â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì´ 650ì¥ì˜ ì •ìƒ ì´ë¯¸ì§€                         â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ [ì „ì²´ ì¬ìƒì„± ì‹œì‘]                             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ì§„í–‰ ìƒíƒœ                                      â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì‘ì—…: ì „ì²´ ë©”ëª¨ë¦¬ë±…í¬ ìƒì„±                     â”‚ â”‚
â”‚ â”‚ ìƒíƒœ: ì§„í–‰ ì¤‘                                  â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 60%            â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ - prod1 ì™„ë£Œ âœ“                                 â”‚ â”‚
â”‚ â”‚ - leather ì™„ë£Œ âœ“                               â”‚ â”‚
â”‚ â”‚ - grid ì§„í–‰ ì¤‘... (108/180)                    â”‚ â”‚
â”‚ â”‚ - carpet ëŒ€ê¸° ì¤‘                               â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ê²½ê³¼ ì‹œê°„: 3ë¶„ 20ì´ˆ                            â”‚ â”‚
â”‚ â”‚ ì˜ˆìƒ ë‚¨ì€ ì‹œê°„: ì•½ 2ë¶„                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ë°°í¬ ì´ë ¥                                      â”‚ â”‚
â”‚ â”‚                                                â”‚ â”‚
â”‚ â”‚ ì‹œì‘ì‹œê°„      ì¢…ë£Œì‹œê°„     ëŒ€ìƒì œí’ˆìˆ˜  ìƒíƒœ  [ë¡œê·¸]â”‚ â”‚
â”‚ â”‚ 11-13 15:00  11-13 15:05  4ê°œ        ì„±ê³µ  [ë³´ê¸°]â”‚ â”‚
â”‚ â”‚ 11-13 14:30  11-13 14:35  4ê°œ        ì„±ê³µ  [ë³´ê¸°]â”‚ â”‚
â”‚ â”‚ 11-13 13:00  ì‹¤íŒ¨         -          ì‹¤íŒ¨  [ë³´ê¸°]â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚ âš ï¸ ì£¼ì˜ì‚¬í•­:                                       â”‚
â”‚ - ë©”ëª¨ë¦¬ë±…í¬ ìƒì„± ì¤‘ì—ëŠ” ëª¨ë“  ì œí’ˆ ê²€ì‚¬ê°€ ì œí•œë©ë‹ˆë‹¤.â”‚
â”‚ - ì „ì²´ ì¬ìƒì„±ì€ 5~10ë¶„ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.         â”‚
â”‚ - ë¡œì»¬ ì„œë²„ì˜ /data/patchCore/ ê²½ë¡œ ì´ë¯¸ì§€ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ë°©ì‹

**ë°©ë²• 1: ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ì§ì ‘ ì‹¤í–‰**
```python
import subprocess
import asyncio

async def build_patchcore_memory_bank():
    """
    build_patchcore.sh ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
    """
    script_path = "/home/dmillion/llm_chal_vlm/build_patchcore.sh"
    
    try:
        # ë¹„ë™ê¸° í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰
        process = await asyncio.create_subprocess_exec(
            "bash", script_path,
            stdout=asyncio.subprocess.PIPE,
            stderr=asyncio.subprocess.PIPE
        )
        
        # ì‹¤ì‹œê°„ ì¶œë ¥ ì²˜ë¦¬
        while True:
            line = await process.stdout.readline()
            if not line:
                break
            # ì§„í–‰ ìƒíƒœ ë¡œê¹… ë° DB ì—…ë°ì´íŠ¸
            print(line.decode().strip())
        
        # í”„ë¡œì„¸ìŠ¤ ì™„ë£Œ ëŒ€ê¸°
        await process.wait()
        
        return process.returncode == 0
    except Exception as e:
        print(f"Error: {e}")
        return False
```

**ë°©ë²• 2: Python ëª¨ë“ˆ ì§ì ‘ í˜¸ì¶œ**
```python
import subprocess

def build_patchcore_memory_bank():
    """
    build_bank.py ì§ì ‘ í˜¸ì¶œ
    """
    cmd = [
        "python", "modules/patchCore/build_bank.py",
        "--root", "./data/patchCore",
        "--shorter", "512",
        "--stride", "2",
        "--layers", "layer2", "layer3", "layer4",
        "--coreset", "0.02"
    ]
    
    try:
        # ì‹¤ì‹œê°„ ì¶œë ¥ì„ ìœ„í•œ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰
        process = subprocess.Popen(
            cmd,
            stdout=subprocess.PIPE,
            stderr=subprocess.STDOUT,
            universal_newlines=True,
            cwd="/home/dmillion/llm_chal_vlm"
        )
        
        # ì‹¤ì‹œê°„ ë¡œê·¸ ì¶œë ¥
        for line in process.stdout:
            print(line.strip())
            # ì§„í–‰ ìƒíƒœ DB ì—…ë°ì´íŠ¸
        
        process.wait()
        return process.returncode == 0
    except Exception as e:
        print(f"Error: {e}")
        return False
```

#### ë™ì‘ ì›ë¦¬
1. **ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰**:
   ```bash
   bash /home/dmillion/llm_chal_vlm/build_patchcore.sh
   ```

2. **build_bank.py ì‹¤í–‰**:
   - `/data/patchCore/` í•˜ìœ„ ëª¨ë“  í´ë” ìŠ¤ìº”
   - ê° í´ë”ì˜ `ok/` ì„œë¸Œí´ë”ì—ì„œ ì •ìƒ ì´ë¯¸ì§€ ë¡œë“œ
   - PatchCore ë©”ëª¨ë¦¬ë±…í¬ ìƒì„±
   - ë©”ëª¨ë¦¬ë±…í¬ íŒŒì¼ ì €ì¥

3. **ìƒì„±ë˜ëŠ” íŒŒì¼**:
   - `/data/patchCore/prod1/patchcore_memory.pkl`
   - `/data/patchCore/leather/patchcore_memory.pkl`
   - `/data/patchCore/grid/patchcore_memory.pkl`
   - `/data/patchCore/carpet/patchcore_memory.pkl`

#### DB ì—°ë™
- **deployment_logs í…Œì´ë¸”**: ë°°í¬ ì´ë ¥ ì €ì¥
  - `task_type`: 'patchcore'
  - `product_id`: NULL (ì „ì²´ ì œí’ˆ ëŒ€ìƒ)
  - `target_count`: ì²˜ë¦¬ëœ ì œí’ˆ ê°œìˆ˜

---

## 4. Object Storage ì—°ë™

### 4.1 ê°œìš”

**ì‚¬ìš© ì„œë¹„ìŠ¤**: Naver Cloud Platform Object Storage  
**ë²„í‚·ëª…**: `dm-obs` (í™˜ê²½ë³€ìˆ˜: `NCP_BUCKET`)  
**ì ‘ê·¼ ë°©ì‹**: boto3 (AWS S3 í˜¸í™˜ API)  
**ì—”ë“œí¬ì¸íŠ¸**: https://kr.object.ncloudstorage.com  
**ë¦¬ì „**: kr-standard

### 4.2 ì—°ë™ ì „ëµ

#### ê´€ë¦¬ì í˜ì´ì§€
**Object Storage ì‚¬ìš©**:
1. **ë§¤ë‰´ì–¼ íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ**
2. **ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œ**
3. **ë™ì  í´ë” ìƒì„± ë° ê´€ë¦¬**

#### ì‘ì—…ì í˜ì´ì§€
**ë¡œì»¬ ì„œë²„ ê²½ë¡œ ê¸°ë°˜ ìœ ì§€** (ì´ë¯¸ì§€ ì„ë² ë”©/ì¸ë±ìŠ¤ ì²˜ë¦¬ë¥¼ ìœ„í•´ í•„ìˆ˜):
- ì´ë¯¸ì§€ ê²€ì¶œ/ì²˜ë¦¬: ë¡œì»¬ ê²½ë¡œ ê¸°ë°˜
- ì´ë¯¸ì§€ í‘œì‹œ: Object Storage URL ê¸°ë°˜

**ì¤‘ìš”**: ì‘ì—…ì í˜ì´ì§€ì—ì„œ ì´ë¯¸ì§€ë¥¼ í‘œì‹œí•  ë•ŒëŠ” ë¡œì»¬ ì„œë²„ ê²½ë¡œê°€ ì•„ë‹Œ **Object Storage URL**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

#### ì‘ì—…ì í˜ì´ì§€ ì´ë¯¸ì§€ í‘œì‹œ ë°©ì‹
```python
# ë¡œì»¬ ê²½ë¡œì—ì„œ ì´ë¯¸ì§€ ì²˜ë¦¬
local_path = "/data/patchCore/prod1/prod1_ok_001.jpg"

# Object Storage ê²½ë¡œ ë§¤í•‘ (DBì— ì €ì¥ëœ ê²½ë¡œ)
obs_path = "images/normal/prod1/prod1_ok_001.jpg"

# ì›¹ ë¸Œë¼ìš°ì €ì— ì „ë‹¬í•  URL
image_url = f"https://kr.object.ncloudstorage.com/dm-obs/{obs_path}"
```

```html
<!-- ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ Object Storage ì´ë¯¸ì§€ ë¡œë“œ -->
<img src="https://kr.object.ncloudstorage.com/dm-obs/images/normal/prod1/prod1_ok_001.jpg">
```

### 4.3 ë™ì  í´ë” êµ¬ì¡° ì„¤ê³„

#### í´ë” ëª…ëª… ê·œì¹™
ì œí’ˆëª…ê³¼ ë¶ˆëŸ‰ëª…ì€ ì‚¬ìš©ìê°€ ì„ì˜ë¡œ ë“±ë¡í•˜ë¯€ë¡œ, ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ í´ë”ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.

```
s3://dm-obs/
â”œâ”€â”€ manuals/
â”‚   â”œâ”€â”€ {product_id}/              # ì œí’ˆ ID ê¸°ë°˜ í´ë”
â”‚   â”‚   â””â”€â”€ {filename}.pdf
â”‚   â””â”€â”€ ...
â””â”€â”€ images/
    â”œâ”€â”€ normal/
    â”‚   â”œâ”€â”€ {product_id}/          # ì œí’ˆ ID ê¸°ë°˜ í´ë”
    â”‚   â”‚   â”œâ”€â”€ {filename}.jpg
    â”‚   â”‚   â””â”€â”€ ...
    â”‚   â””â”€â”€ ...
    â””â”€â”€ defect/
        â”œâ”€â”€ {product_id}_{defect_type_id}/  # ì œí’ˆID_ë¶ˆëŸ‰ìœ í˜•ID
        â”‚   â”œâ”€â”€ {filename}.jpg
        â”‚   â””â”€â”€ ...
        â””â”€â”€ ...
```

#### í´ë” ìƒì„± ì˜ˆì‹œ
```python
import boto3
import os

# Object Storage í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
s3 = boto3.client(
    's3',
    endpoint_url='https://kr.object.ncloudstorage.com',
    aws_access_key_id=os.environ.get('NCP_ACCESS_KEY'),
    aws_secret_access_key=os.environ.get('NCP_SECRET_KEY'),
    region_name='kr-standard'
)

BUCKET = os.environ.get('NCP_BUCKET')  # 'dm-obs'

def create_folder(folder_path):
    """
    Object Storageì— í´ë” ìƒì„±
    
    Args:
        folder_path: í´ë” ê²½ë¡œ (ì˜ˆ: 'images/normal/123/')
    """
    # í´ë”ëŠ” '/'ë¡œ ëë‚˜ì•¼ í•¨
    if not folder_path.endswith('/'):
        folder_path += '/'
    
    s3.put_object(Bucket=BUCKET, Key=folder_path)
    return folder_path

# ì œí’ˆ ë“±ë¡ ì‹œ í´ë” ìë™ ìƒì„±
def create_product_folders(product_id):
    """
    ì œí’ˆ ë“±ë¡ ì‹œ í•„ìš”í•œ ëª¨ë“  í´ë” ìƒì„±
    """
    folders = [
        f'manuals/{product_id}/',
        f'images/normal/{product_id}/',
        f'images/defect/{product_id}/'
    ]
    
    for folder in folders:
        create_folder(folder)
    
    return folders

# ë¶ˆëŸ‰ ìœ í˜• ë“±ë¡ ì‹œ í´ë” ìƒì„±
def create_defect_folder(product_id, defect_type_id):
    """
    ë¶ˆëŸ‰ ìœ í˜• ë“±ë¡ ì‹œ í´ë” ìƒì„±
    """
    folder = f'images/defect/{product_id}_{defect_type_id}/'
    create_folder(folder)
    return folder
```

### 4.4 íŒŒì¼ ì—…ë¡œë“œ

#### ë‹¨ì¼ íŒŒì¼ ì—…ë¡œë“œ
```python
def upload_file(local_path, s3_key):
    """
    ë¡œì»¬ íŒŒì¼ì„ Object Storageì— ì—…ë¡œë“œ
    
    Args:
        local_path: ë¡œì»¬ íŒŒì¼ ê²½ë¡œ
        s3_key: Object Storage ê°ì²´ í‚¤
        
    Returns:
        bool: ì„±ê³µ ì—¬ë¶€
    """
    try:
        s3.upload_file(local_path, BUCKET, s3_key)
        return True
    except Exception as e:
        print(f"Upload error: {e}")
        return False

# ì‚¬ìš© ì˜ˆì‹œ - ë§¤ë‰´ì–¼ ì—…ë¡œë“œ
product_id = 1
filename = "prod1_manual.pdf"
local_path = "/tmp/uploaded_manual.pdf"
s3_key = f"manuals/{product_id}/{filename}"

upload_file(local_path, s3_key)
```

#### ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ (ë³‘ë ¬ ì²˜ë¦¬)
```python
import concurrent.futures
from pathlib import Path

def upload_multiple_files(file_list, base_s3_path):
    """
    ì—¬ëŸ¬ íŒŒì¼ì„ ë³‘ë ¬ë¡œ ì—…ë¡œë“œ
    
    Args:
        file_list: ë¡œì»¬ íŒŒì¼ ê²½ë¡œ ë¦¬ìŠ¤íŠ¸
        base_s3_path: Object Storage ê¸°ë³¸ ê²½ë¡œ
        
    Returns:
        dict: ì—…ë¡œë“œ ê²°ê³¼ {filename: success}
    """
    results = {}
    
    def upload_single(file_path):
        filename = Path(file_path).name
        s3_key = f"{base_s3_path}/{filename}"
        success = upload_file(file_path, s3_key)
        return filename, success
    
    # ìµœëŒ€ 10ê°œ íŒŒì¼ ë™ì‹œ ì—…ë¡œë“œ
    with concurrent.futures.ThreadPoolExecutor(max_workers=10) as executor:
        futures = [executor.submit(upload_single, f) for f in file_list]
        
        for future in concurrent.futures.as_completed(futures):
            filename, success = future.result()
            results[filename] = success
    
    return results

# ì‚¬ìš© ì˜ˆì‹œ - ì •ìƒ ì´ë¯¸ì§€ ì—…ë¡œë“œ
product_id = 1
image_files = [
    "/tmp/prod1_ok_001.jpg",
    "/tmp/prod1_ok_002.jpg",
    "/tmp/prod1_ok_003.jpg"
]
base_path = f"images/normal/{product_id}"

results = upload_multiple_files(image_files, base_path)
```

### 4.5 íŒŒì¼ ëª©ë¡ ì¡°íšŒ

#### ì „ì²´ ëª©ë¡ ì¡°íšŒ
```python
def list_all_objects(prefix=''):
    """
    ë²„í‚· ë‚´ ëª¨ë“  ê°ì²´ ì¡°íšŒ
    
    Args:
        prefix: ê²½ë¡œ ì ‘ë‘ì‚¬ (ì˜ˆ: 'images/normal/')
        
    Returns:
        list: ê°ì²´ ëª©ë¡
    """
    objects = []
    max_keys = 1000
    marker = None
    
    while True:
        params = {
            'Bucket': BUCKET,
            'MaxKeys': max_keys
        }
        
        if prefix:
            params['Prefix'] = prefix
        if marker:
            params['Marker'] = marker
        
        response = s3.list_objects(**params)
        
        if 'Contents' in response:
            objects.extend(response['Contents'])
        
        if response.get('IsTruncated'):
            marker = response.get('NextMarker')
        else:
            break
    
    return objects

# ì‚¬ìš© ì˜ˆì‹œ - íŠ¹ì • ì œí’ˆì˜ ì •ìƒ ì´ë¯¸ì§€ ëª©ë¡
product_id = 1
prefix = f"images/normal/{product_id}/"
images = list_all_objects(prefix)

for obj in images:
    print(f"Name: {obj['Key']}, Size: {obj['Size']} bytes")
```

#### í´ë” ë° íŒŒì¼ êµ¬ë¶„ ì¡°íšŒ
```python
def list_folders_and_files(prefix=''):
    """
    í´ë”ì™€ íŒŒì¼ì„ êµ¬ë¶„í•˜ì—¬ ì¡°íšŒ
    
    Args:
        prefix: ê²½ë¡œ ì ‘ë‘ì‚¬
        
    Returns:
        tuple: (folders, files)
    """
    delimiter = '/'
    folders = []
    files = []
    max_keys = 1000
    marker = None
    
    while True:
        params = {
            'Bucket': BUCKET,
            'Delimiter': delimiter,
            'MaxKeys': max_keys
        }
        
        if prefix:
            params['Prefix'] = prefix
        if marker:
            params['Marker'] = marker
        
        response = s3.list_objects(**params)
        
        # í´ë” ëª©ë¡
        if 'CommonPrefixes' in response:
            for folder in response['CommonPrefixes']:
                folders.append(folder['Prefix'])
        
        # íŒŒì¼ ëª©ë¡
        if 'Contents' in response:
            for obj in response['Contents']:
                # í´ë”ê°€ ì•„ë‹Œ íŒŒì¼ë§Œ
                if not obj['Key'].endswith('/'):
                    files.append(obj)
        
        if response.get('IsTruncated'):
            marker = response.get('NextMarker')
        else:
            break
    
    return folders, files

# ì‚¬ìš© ì˜ˆì‹œ - ëª¨ë“  ì œí’ˆ í´ë” ì¡°íšŒ
folders, files = list_folders_and_files('images/normal/')
print("ì œí’ˆ í´ë”:")
for folder in folders:
    print(f"  {folder}")
```

### 4.6 íŒŒì¼ ë‹¤ìš´ë¡œë“œ

#### ë‹¨ì¼ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
```python
def download_file(s3_key, local_path):
    """
    Object Storageì—ì„œ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
    
    Args:
        s3_key: Object Storage ê°ì²´ í‚¤
        local_path: ë¡œì»¬ ì €ì¥ ê²½ë¡œ
        
    Returns:
        bool: ì„±ê³µ ì—¬ë¶€
    """
    try:
        s3.download_file(BUCKET, s3_key, local_path)
        return True
    except Exception as e:
        print(f"Download error: {e}")
        return False

# ì‚¬ìš© ì˜ˆì‹œ
s3_key = "images/normal/1/prod1_ok_001.jpg"
local_path = "/data/patchCore/prod1/prod1_ok_001.jpg"

download_file(s3_key, local_path)
```

#### ë‹¤ì¤‘ íŒŒì¼ ë‹¤ìš´ë¡œë“œ (ë³‘ë ¬ ì²˜ë¦¬)
```python
def download_multiple_files(s3_keys, local_base_path):
    """
    ì—¬ëŸ¬ íŒŒì¼ì„ ë³‘ë ¬ë¡œ ë‹¤ìš´ë¡œë“œ
    
    Args:
        s3_keys: Object Storage ê°ì²´ í‚¤ ë¦¬ìŠ¤íŠ¸
        local_base_path: ë¡œì»¬ ì €ì¥ ê¸°ë³¸ ê²½ë¡œ
        
    Returns:
        dict: ë‹¤ìš´ë¡œë“œ ê²°ê³¼ {s3_key: success}
    """
    results = {}
    
    def download_single(s3_key):
        filename = Path(s3_key).name
        local_path = Path(local_base_path) / filename
        local_path.parent.mkdir(parents=True, exist_ok=True)
        success = download_file(s3_key, str(local_path))
        return s3_key, success
    
    # ìµœëŒ€ 10ê°œ íŒŒì¼ ë™ì‹œ ë‹¤ìš´ë¡œë“œ
    with concurrent.futures.ThreadPoolExecutor(max_workers=10) as executor:
        futures = [executor.submit(download_single, key) for key in s3_keys]
        
        for future in concurrent.futures.as_completed(futures):
            s3_key, success = future.result()
            results[s3_key] = success
    
    return results
```

### 4.7 íŒŒì¼ ì‚­ì œ

```python
def delete_file(s3_key):
    """
    Object Storageì—ì„œ íŒŒì¼ ì‚­ì œ
    
    Args:
        s3_key: Object Storage ê°ì²´ í‚¤
        
    Returns:
        bool: ì„±ê³µ ì—¬ë¶€
    """
    try:
        s3.delete_object(Bucket=BUCKET, Key=s3_key)
        return True
    except Exception as e:
        print(f"Delete error: {e}")
        return False

# ì‚¬ìš© ì˜ˆì‹œ
s3_key = "images/defect/1_2/prod1_hole_001.jpg"
delete_file(s3_key)
```

#### í´ë” ì „ì²´ ì‚­ì œ (ì¬ê·€ ì‚­ì œ)
```python
def delete_folder(folder_path):
    """
    í´ë”ì™€ í•˜ìœ„ ëª¨ë“  íŒŒì¼ ì‚­ì œ
    
    Args:
        folder_path: ì‚­ì œí•  í´ë” ê²½ë¡œ
        
    Returns:
        int: ì‚­ì œëœ íŒŒì¼ ìˆ˜
    """
    # í´ë” ë‚´ ëª¨ë“  ê°ì²´ ì¡°íšŒ
    objects = list_all_objects(folder_path)
    
    deleted_count = 0
    for obj in objects:
        if delete_file(obj['Key']):
            deleted_count += 1
    
    return deleted_count

# ì‚¬ìš© ì˜ˆì‹œ - ì œí’ˆ ì‚­ì œ ì‹œ ëª¨ë“  ê´€ë ¨ íŒŒì¼ ì‚­ì œ
product_id = 1
folders_to_delete = [
    f'manuals/{product_id}/',
    f'images/normal/{product_id}/',
    f'images/defect/{product_id}_*/'  # í•´ë‹¹ ì œí’ˆì˜ ëª¨ë“  ë¶ˆëŸ‰ ìœ í˜• í´ë”
]

for folder in folders_to_delete:
    count = delete_folder(folder)
    print(f"Deleted {count} files from {folder}")
```

### 4.8 URL ìƒì„± ë° ì´ë¯¸ì§€ í‘œì‹œ

#### ê³µê°œ URL ìƒì„±
```python
def get_object_url(s3_key):
    """
    Object Storage ê°ì²´ì˜ ê³µê°œ URL ìƒì„±
    
    Args:
        s3_key: Object Storage ê°ì²´ í‚¤
        
    Returns:
        str: ê³µê°œ URL
    """
    return f"https://kr.object.ncloudstorage.com/{BUCKET}/{s3_key}"

# ì‚¬ìš© ì˜ˆì‹œ
s3_key = "images/normal/1/prod1_ok_001.jpg"
image_url = get_object_url(s3_key)
print(image_url)
# https://kr.object.ncloudstorage.com/dm-obs/images/normal/1/prod1_ok_001.jpg
```

#### ì‘ì—…ì í˜ì´ì§€ì—ì„œ ì´ë¯¸ì§€ í‘œì‹œ
```python
from fastapi import FastAPI
from fastapi.responses import JSONResponse

app = FastAPI()

@app.get("/api/worker/image/{image_id}")
def get_image_info(image_id: int):
    """
    ì´ë¯¸ì§€ ì •ë³´ ì¡°íšŒ (ì‘ì—…ì í˜ì´ì§€ìš©)
    
    Returns:
        {
            "local_path": "/data/patchCore/prod1/prod1_ok_001.jpg",  # ì²˜ë¦¬ìš©
            "display_url": "https://kr.object.ncloudstorage.com/..."  # í‘œì‹œìš©
        }
    """
    # DBì—ì„œ ì´ë¯¸ì§€ ì •ë³´ ì¡°íšŒ
    image = db.query(Image).filter(Image.image_id == image_id).first()
    
    # local_path: ì„œë²„ ë‚´ë¶€ ì²˜ë¦¬ìš© (ì„ë² ë”©, ê²€ì¶œ ë“±)
    local_path = f"/data/patchCore/{image.product_code}/{image.file_name}"
    
    # display_url: ë¸Œë¼ìš°ì € í‘œì‹œìš© (Object Storage URL)
    s3_key = image.file_path  # DBì— ì €ì¥ëœ Object Storage ê²½ë¡œ
    display_url = get_object_url(s3_key)
    
    return {
        "local_path": local_path,
        "display_url": display_url
    }
```

```html
<!-- ì‘ì—…ì í˜ì´ì§€ HTML -->
<script>
// ì´ë¯¸ì§€ ì •ë³´ ì¡°íšŒ
fetch('/api/worker/image/123')
    .then(res => res.json())
    .then(data => {
        // Object Storage URLë¡œ ì´ë¯¸ì§€ í‘œì‹œ
        document.getElementById('result-image').src = data.display_url;
    });
</script>

<img id="result-image" src="" alt="ê²€ì¶œ ê²°ê³¼">
```

### 4.9 DBì™€ Object Storage ì—°ë™

#### ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° ê´€ë¦¬
```python
from sqlalchemy import Column, Integer, String, BigInteger, TIMESTAMP
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class Image(Base):
    __tablename__ = 'images'
    
    image_id = Column(Integer, primary_key=True)
    product_id = Column(Integer)
    image_type = Column(String(20))  # 'normal' or 'defect'
    defect_type_id = Column(Integer, nullable=True)
    file_name = Column(String(255))
    file_path = Column(String(500))  # Object Storage ê²½ë¡œ
    file_size = Column(BigInteger)
    uploaded_at = Column(TIMESTAMP)

# ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œ DB ì €ì¥
def save_image_to_db(product_id, image_type, file_name, s3_key, file_size):
    """
    ì´ë¯¸ì§€ ì—…ë¡œë“œ í›„ DBì— ë©”íƒ€ë°ì´í„° ì €ì¥
    """
    image = Image(
        product_id=product_id,
        image_type=image_type,
        file_name=file_name,
        file_path=s3_key,  # Object Storage ê²½ë¡œ ì €ì¥
        file_size=file_size
    )
    db.add(image)
    db.commit()
    return image.image_id

# ì´ë¯¸ì§€ ì¡°íšŒ ì‹œ URL ìƒì„±
def get_image_display_url(image_id):
    """
    DBì—ì„œ ì´ë¯¸ì§€ ì •ë³´ ì¡°íšŒí•˜ì—¬ í‘œì‹œ URL ë°˜í™˜
    """
    image = db.query(Image).filter(Image.image_id == image_id).first()
    return get_object_url(image.file_path)
```

### 4.10 ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆ êµ¬ì¡°

```python
# web/utils/object_storage.py

import os
import boto3
from pathlib import Path
from typing import List, Tuple

class ObjectStorageManager:
    """Object Storage ê´€ë¦¬ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤"""
    
    def __init__(self):
        self.s3 = boto3.client(
            's3',
            endpoint_url='https://kr.object.ncloudstorage.com',
            aws_access_key_id=os.environ.get('NCP_ACCESS_KEY'),
            aws_secret_access_key=os.environ.get('NCP_SECRET_KEY'),
            region_name='kr-standard'
        )
        self.bucket = os.environ.get('NCP_BUCKET', 'dm-obs')
    
    def create_folder(self, folder_path: str) -> bool:
        """í´ë” ìƒì„±"""
        pass
    
    def upload_file(self, local_path: str, s3_key: str) -> bool:
        """íŒŒì¼ ì—…ë¡œë“œ"""
        pass
    
    def download_file(self, s3_key: str, local_path: str) -> bool:
        """íŒŒì¼ ë‹¤ìš´ë¡œë“œ"""
        pass
    
    def delete_file(self, s3_key: str) -> bool:
        """íŒŒì¼ ì‚­ì œ"""
        pass
    
    def list_objects(self, prefix: str = '') -> List[dict]:
        """ê°ì²´ ëª©ë¡ ì¡°íšŒ"""
        pass
    
    def get_url(self, s3_key: str) -> str:
        """ê³µê°œ URL ìƒì„±"""
        return f"https://kr.object.ncloudstorage.com/{self.bucket}/{s3_key}"

# ì‚¬ìš© ì˜ˆì‹œ
obs_manager = ObjectStorageManager()
obs_manager.upload_file('/tmp/test.jpg', 'images/normal/1/test.jpg')
url = obs_manager.get_url('images/normal/1/test.jpg')
```

### 4.11 ì¤‘ìš” ì‚¬í•­ ì •ë¦¬

1. **ê´€ë¦¬ì í˜ì´ì§€**: 
   - ëª¨ë“  íŒŒì¼ ì—…ë¡œë“œëŠ” Object Storageì— ì €ì¥
   - í´ë” êµ¬ì¡°ëŠ” ì œí’ˆ IDì™€ ë¶ˆëŸ‰ ìœ í˜• ID ê¸°ë°˜ìœ¼ë¡œ ìë™ ìƒì„±

2. **ì‘ì—…ì í˜ì´ì§€**:
   - ì´ë¯¸ì§€ ì²˜ë¦¬(ì„ë² ë”©, ê²€ì¶œ)ëŠ” ë¡œì»¬ ê²½ë¡œ ê¸°ë°˜
   - ì´ë¯¸ì§€ í‘œì‹œëŠ” Object Storage URL ì‚¬ìš©
   - ë¡œì»¬ ê²½ë¡œì™€ Object Storage ê²½ë¡œ ë§¤í•‘ í•„ìˆ˜

3. **ë°ì´í„° ë™ê¸°í™”**:
   - Object Storageì— ì—…ë¡œë“œëœ íŒŒì¼ì€ ë°°í¬ ì‹œì ì— ë¡œì»¬ë¡œ ë‹¤ìš´ë¡œë“œ
   - DBì—ëŠ” Object Storage ê²½ë¡œ ì €ì¥
   - ë¡œì»¬ ê²½ë¡œëŠ” ì‹œìŠ¤í…œ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©

---

## 5. API ì„¤ê³„

### 5.1 ê´€ë¦¬ì API ì—”ë“œí¬ì¸íŠ¸

#### ëŒ€ì‹œë³´ë“œ
```python
GET    /api/admin/dashboard            # ëŒ€ì‹œë³´ë“œ ë°ì´í„° ì¡°íšŒ
```

#### ì œí’ˆ/ë§¤ë‰´ì–¼/ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬
```python
# ì œí’ˆ ê´€ë¦¬
POST   /api/admin/product              # ì œí’ˆ ë“±ë¡
GET    /api/admin/product              # ì œí’ˆ ëª©ë¡ ì¡°íšŒ
GET    /api/admin/product/{id}         # ì œí’ˆ ìƒì„¸ ì¡°íšŒ
PUT    /api/admin/product/{id}         # ì œí’ˆ ìˆ˜ì •
DELETE /api/admin/product/{id}         # ì œí’ˆ ì‚­ì œ

# ë§¤ë‰´ì–¼ ê´€ë¦¬
POST   /api/admin/manual               # ë§¤ë‰´ì–¼ ì—…ë¡œë“œ (â†’ Object Storage)
GET    /api/admin/manual               # ë§¤ë‰´ì–¼ ëª©ë¡ ì¡°íšŒ
GET    /api/admin/manual/{id}/download # ë§¤ë‰´ì–¼ ë‹¤ìš´ë¡œë“œ (â† Object Storage)
DELETE /api/admin/manual/{id}          # ë§¤ë‰´ì–¼ ì‚­ì œ (Object Storage + DB)

# ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬
POST   /api/admin/defect-type          # ë¶ˆëŸ‰ ìœ í˜• ë“±ë¡
GET    /api/admin/defect-type          # ë¶ˆëŸ‰ ìœ í˜• ëª©ë¡ ì¡°íšŒ
PUT    /api/admin/defect-type/{id}     # ë¶ˆëŸ‰ ìœ í˜• ìˆ˜ì •
DELETE /api/admin/defect-type/{id}     # ë¶ˆëŸ‰ ìœ í˜• ì‚­ì œ
```

#### ì´ë¯¸ì§€ ê´€ë¦¬
```python
# ì •ìƒ ì´ë¯¸ì§€
POST   /api/admin/image/normal         # ì •ìƒ ì´ë¯¸ì§€ ì—…ë¡œë“œ (â†’ Object Storage)
GET    /api/admin/image/normal         # ì •ìƒ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ
DELETE /api/admin/image/normal/{id}    # ì •ìƒ ì´ë¯¸ì§€ ì‚­ì œ

# ë¶ˆëŸ‰ ì´ë¯¸ì§€
POST   /api/admin/image/defect         # ë¶ˆëŸ‰ ì´ë¯¸ì§€ ì—…ë¡œë“œ (â†’ Object Storage)
GET    /api/admin/image/defect         # ë¶ˆëŸ‰ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ
DELETE /api/admin/image/defect/{id}    # ë¶ˆëŸ‰ ì´ë¯¸ì§€ ì‚­ì œ

# í†µê³„
GET    /api/admin/image/stats          # ì´ë¯¸ì§€ í†µê³„ ì¡°íšŒ
```

#### ì „ì²˜ë¦¬ ë° ëª¨ë¸ ì„¤ì •
```python
GET    /api/admin/preprocessing/{product_id}  # ì „ì²˜ë¦¬ ì„¤ì • ì¡°íšŒ
PUT    /api/admin/preprocessing/{product_id}  # ì „ì²˜ë¦¬ ì„¤ì • ìˆ˜ì •

GET    /api/admin/model                       # ëª¨ë¸ ì„¤ì • ì¡°íšŒ
PUT    /api/admin/model                       # ëª¨ë¸ ì„¤ì • ìˆ˜ì •
```

#### ì„œë²„ ë°°í¬
```python
# CLIP ì„ë² ë”© ì¬êµ¬ì¶•
POST   /api/admin/deployment/clip/normal      # ì •ìƒ ì´ë¯¸ì§€ ì¸ë±ìŠ¤ ì¬êµ¬ì¶•
POST   /api/admin/deployment/clip/defect      # ë¶ˆëŸ‰ ì´ë¯¸ì§€ ì¸ë±ìŠ¤ ì¬êµ¬ì¶•

# PatchCore ë©”ëª¨ë¦¬ë±…í¬ ìƒì„±
POST   /api/admin/deployment/patchcore/{product_id}  # ì œí’ˆë³„ ë©”ëª¨ë¦¬ë±…í¬ ìƒì„±

# ë°°í¬ ìƒíƒœ ì¡°íšŒ
GET    /api/admin/deployment/status/{task_id}  # ë°°í¬ ì§„í–‰ ìƒíƒœ ì¡°íšŒ
GET    /api/admin/deployment/logs              # ë°°í¬ ì´ë ¥ ì¡°íšŒ
```

---


## 6. ê°œë°œ ìš°ì„ ìˆœìœ„

### Phase 1: í•µì‹¬ CRUD ê¸°ëŠ¥ (1ì£¼) - âœ… **ì™„ë£Œ**
**ëª©í‘œ**: ì œí’ˆ, ë§¤ë‰´ì–¼, ë¶ˆëŸ‰ ìœ í˜•, ì´ë¯¸ì§€ ë“±ë¡ ê¸°ëŠ¥ êµ¬í˜„

1. âœ… **ì œí’ˆ ê´€ë¦¬** (3.2)
   - CRUD API ê°œë°œ
   - í™”ë©´ ê°œë°œ

2. âœ… **ë§¤ë‰´ì–¼ ê´€ë¦¬** (3.3)
   - CRUD API ê°œë°œ
   - í™”ë©´ ê°œë°œ
   - âš ï¸ Object Storage ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ë¯¸êµ¬í˜„

3. âœ… **ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬** (3.4)
   - CRUD API ê°œë°œ
   - í™”ë©´ ê°œë°œ

4. âœ… **ì •ìƒ/ë¶ˆëŸ‰ ì´ë¯¸ì§€ ë“±ë¡** (3.5, 3.6)
   - í™”ë©´ ê°œë°œ
   - âš ï¸ Object Storage ì—…ë¡œë“œ ë¯¸êµ¬í˜„
   - âš ï¸ ë‹¤ì¤‘ íŒŒì¼/ZIP ì—…ë¡œë“œ ê¸°ëŠ¥ í™•ì¸ í•„ìš”

### Phase 2: ì„œë²„ ë°°í¬ ê¸°ëŠ¥ (1ì£¼) - ğŸ”„ **ì§„í–‰ ì˜ˆì •**
**ëª©í‘œ**: ë¹„ë™ê¸° ë°°ì¹˜ ì„œë¹„ìŠ¤ êµ¬í˜„

5. â¬œ **CLIP ì„ë² ë”© ì¬êµ¬ì¶•** (3.9)
   - Object Storage â†’ ë¡œì»¬ ë‹¤ìš´ë¡œë“œ
   - ë¹„ë™ê¸° ë°°ì¹˜ ì„œë¹„ìŠ¤ êµ¬í˜„
   - ì§„í–‰ ìƒíƒœ ì¶”ì 
   - í™”ë©´ ê°œë°œ

6. â¬œ **PatchCore ë©”ëª¨ë¦¬ë±…í¬ ìƒì„±** (3.10)
   - ë¹„ë™ê¸° ë°°ì¹˜ ì„œë¹„ìŠ¤ êµ¬í˜„
   - ì§„í–‰ ìƒíƒœ ì¶”ì 
   - í™”ë©´ ê°œë°œ

### Phase 3: ì„¤ì • ë° ëª¨ë‹ˆí„°ë§ (3-4ì¼) - â¬œ **ëŒ€ê¸° ì¤‘**
**ëª©í‘œ**: ì „ì²˜ë¦¬ ì„¤ì •, ëª¨ë¸ ì„ íƒ, ëŒ€ì‹œë³´ë“œ êµ¬í˜„

7. â¬œ **ì´ë¯¸ì§€ ì „ì²˜ë¦¬ ì„¤ì •** (3.7)
8. â¬œ **ëª¨ë¸ ì„ íƒ** (3.8)
9. â¬œ **í†µí•© ëŒ€ì‹œë³´ë“œ** (3.1)

### Phase 4: í†µí•© ë° í…ŒìŠ¤íŠ¸ (1ì£¼) - â¬œ **ëŒ€ê¸° ì¤‘**
**ëª©í‘œ**: ì „ì²´ ê¸°ëŠ¥ í†µí•© í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹…

---

## 7. Phase 1 ë‹¬ì„± í˜„í™©

**ì ê²€ì¼**: 2025-11-14  
**ì „ì²´ ì§„í–‰ë¥ **: 80% (4/5 ì£¼ìš” ê¸°ëŠ¥ ì™„ë£Œ)

### 7.1 ì™„ë£Œëœ í•­ëª© âœ…

#### 1. ì œí’ˆ ê´€ë¦¬ (100% ì™„ë£Œ)
- **ë°±ì—”ë“œ**: `web/routers/admin/product.py` âœ…
  - POST /api/admin/product - ì œí’ˆ ë“±ë¡
  - GET /api/admin/product - ì œí’ˆ ëª©ë¡ ì¡°íšŒ
  - PUT /api/admin/product/{id} - ì œí’ˆ ìˆ˜ì •
  - DELETE /api/admin/product/{id} - ì œí’ˆ ì‚­ì œ

- **í”„ë¡ íŠ¸ì—”ë“œ**: `web/pages/admin/admin_product.html` âœ…
  - ì‹ ê·œ ì œí’ˆ ë“±ë¡ í¼
  - ì œí’ˆ ëª©ë¡ í…Œì´ë¸”
  - ìˆ˜ì •/ì‚­ì œ ê¸°ëŠ¥

- **DB ì—°ë™**: `web/database/models.py` - Product ëª¨ë¸ âœ…

#### 2. ë§¤ë‰´ì–¼ ê´€ë¦¬ (80% ì™„ë£Œ)
- **ë°±ì—”ë“œ**: `web/routers/admin/manual.py` âœ…
  - POST /api/admin/manual - ë§¤ë‰´ì–¼ ì—…ë¡œë“œ
  - GET /api/admin/manual - ë§¤ë‰´ì–¼ ëª©ë¡ ì¡°íšŒ
  - DELETE /api/admin/manual/{id} - ë§¤ë‰´ì–¼ ì‚­ì œ

- **í”„ë¡ íŠ¸ì—”ë“œ**: `web/pages/admin/admin_manual.html` âœ…
  - ë§¤ë‰´ì–¼ íŒŒì¼ ì—…ë¡œë“œ í¼
  - ë§¤ë‰´ì–¼ ëª©ë¡ í…Œì´ë¸”

- **ë¯¸ì™„ë£Œ**: âš ï¸
  - Object Storage ì—°ë™ (ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ)
  - í˜„ì¬ ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œ ê¸°ë°˜

#### 3. ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬ (100% ì™„ë£Œ)
- **ë°±ì—”ë“œ**: `web/routers/admin/defect_type.py` âœ…
  - POST /api/admin/defect-type - ë¶ˆëŸ‰ ìœ í˜• ë“±ë¡
  - GET /api/admin/defect-type - ë¶ˆëŸ‰ ìœ í˜• ëª©ë¡ ì¡°íšŒ
  - PUT /api/admin/defect-type/{id} - ë¶ˆëŸ‰ ìœ í˜• ìˆ˜ì •
  - DELETE /api/admin/defect-type/{id} - ë¶ˆëŸ‰ ìœ í˜• ì‚­ì œ

- **í”„ë¡ íŠ¸ì—”ë“œ**: `web/pages/admin/admin_defect_type.html` âœ…
  - ì‹ ê·œ ë¶ˆëŸ‰ ìœ í˜• ë“±ë¡ í¼
  - ë¶ˆëŸ‰ ìœ í˜• ëª©ë¡ í…Œì´ë¸”
  - ì œí’ˆë³„ í•„í„°ë§

- **DB ì—°ë™**: `web/database/models.py` - DefectType ëª¨ë¸ âœ…

#### 4. ì´ë¯¸ì§€ ë“±ë¡ ê´€ë¦¬ (80% ì™„ë£Œ)
- **ë°±ì—”ë“œ**: `web/routers/admin/image.py` âœ…
  - POST /api/admin/image/normal - ì •ìƒ ì´ë¯¸ì§€ ì—…ë¡œë“œ
  - POST /api/admin/image/defect - ë¶ˆëŸ‰ ì´ë¯¸ì§€ ì—…ë¡œë“œ
  - GET /api/admin/image/normal - ì •ìƒ ì´ë¯¸ì§€ ëª©ë¡
  - GET /api/admin/image/defect - ë¶ˆëŸ‰ ì´ë¯¸ì§€ ëª©ë¡
  - DELETE /api/admin/image/{id} - ì´ë¯¸ì§€ ì‚­ì œ

- **í”„ë¡ íŠ¸ì—”ë“œ**: âœ…
  - `web/pages/admin/admin_image_normal.html` - ì •ìƒ ì´ë¯¸ì§€ ë“±ë¡
  - `web/pages/admin/admin_image_defect.html` - ë¶ˆëŸ‰ ì´ë¯¸ì§€ ë“±ë¡

- **ë¯¸ì™„ë£Œ**: âš ï¸
  - Object Storage ì—…ë¡œë“œ êµ¬í˜„
  - ZIP íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
  - ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ ì§„í–‰ë¥  í‘œì‹œ

#### 5. DB ì—°ë™ (100% ì™„ë£Œ)
- **ëª¨ë¸**: `web/database/models.py` âœ…
  - Product
  - Manual
  - DefectType
  - Image
  - (ê¸°íƒ€ í…Œì´ë¸”)

- **ì—°ê²°**: `web/database/connection.py` âœ…
  - MariaDB ì—°ê²° í’€
  - Session ê´€ë¦¬

- **CRUD**: `web/database/crud.py` âœ…
  - ì œí’ˆ CRUD
  - ë§¤ë‰´ì–¼ CRUD
  - ë¶ˆëŸ‰ ìœ í˜• CRUD
  - ì´ë¯¸ì§€ CRUD

#### 6. ê´€ë¦¬ì í˜ì´ì§€ ë ˆì´ì•„ì›ƒ (100% ì™„ë£Œ)
- **ë ˆì´ì•„ì›ƒ**: `web/pages/admin/admin_layout.html` âœ…
  - ì¢Œì¸¡ ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´
  - ì¤‘ë©”ë‰´/ì†Œë©”ë‰´ êµ¬ì¡°
  - ë©”ì¸ ì»¨í…ì¸  ì˜ì—­

- **ë„¤ë¹„ê²Œì´ì…˜ êµ¬ì¡°**: âœ…
  - ğŸ“Š í†µí•© ëŒ€ì‹œë³´ë“œ
  - ğŸ“¦ ì œí’ˆ/ë§¤ë‰´ì–¼ ë“±ë¡ (ì œí’ˆ ê´€ë¦¬, ë§¤ë‰´ì–¼ ê´€ë¦¬, ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬)
  - ğŸ–¼ï¸ ì´ë¯¸ì§€ ë“±ë¡ ê´€ë¦¬ (ì •ìƒ ì´ë¯¸ì§€, ë¶ˆëŸ‰ ì´ë¯¸ì§€)
  - âš™ï¸ ì‹œìŠ¤í…œ ì„¤ì • (ì „ì²˜ë¦¬, ëª¨ë¸ ì„ íƒ)
  - ğŸš€ ì„œë²„ ë°°í¬ (CLIP, PatchCore)

### 7.2 ë¯¸ì™„ë£Œ í•­ëª© âš ï¸

#### 1. Object Storage ì—°ë™ (0% ì™„ë£Œ)
**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ (Phase 2 ì„ í–‰ ì‘ì—…)

**í•„ìš” ì‘ì—…**:
1. `web/utils/object_storage.py` ëª¨ë“ˆ ìƒì„±
   - ObjectStorageManager í´ë˜ìŠ¤
   - boto3 ê¸°ë°˜ S3 í˜¸í™˜ API
   - ê¸°ë³¸ CRUD í•¨ìˆ˜ (upload, download, delete, list)

2. ë§¤ë‰´ì–¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ì—°ë™
   - `web/routers/admin/manual.py` ìˆ˜ì •
   - ì—…ë¡œë“œ: ë¡œì»¬ â†’ Object Storage
   - ë‹¤ìš´ë¡œë“œ: Object Storage â†’ ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ

3. ì´ë¯¸ì§€ ì—…ë¡œë“œ ì—°ë™
   - `web/routers/admin/image.py` ìˆ˜ì •
   - ì—…ë¡œë“œ: ë¡œì»¬ â†’ Object Storage
   - DBì— Object Storage ê²½ë¡œ ì €ì¥

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 0.5ì¼

#### 2. ë‹¤ì¤‘ íŒŒì¼/ZIP ì—…ë¡œë“œ ì²˜ë¦¬ (0% ì™„ë£Œ)
**ìš°ì„ ìˆœìœ„**: ğŸŸ¡ ì¤‘ê°„

**í•„ìš” ì‘ì—…**:
1. ZIP íŒŒì¼ ì••ì¶• í•´ì œ ë¡œì§
2. ë‹¤ì¤‘ íŒŒì¼ ë³‘ë ¬ ì—…ë¡œë“œ
3. ì‹¤ì‹œê°„ ì§„í–‰ë¥  í‘œì‹œ (WebSocket ë˜ëŠ” SSE)

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 0.5ì¼

#### 3. í†µí•© í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹…
**ìš°ì„ ìˆœìœ„**: ğŸŸ¢ ë‚®ìŒ (Phase 4)

**í•„ìš” ì‘ì—…**:
1. ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
2. ì—ëŸ¬ ì¼€ì´ìŠ¤ ê²€ì¦
3. UI/UX ê°œì„ 

### 7.3 Phase 1 ì™„ë£Œë¥¼ ìœ„í•œ ë‚¨ì€ ì‘ì—…

#### ì‘ì—… 1: Object Storage ìœ í‹¸ë¦¬í‹° êµ¬í˜„
```python
# web/utils/object_storage.py ìƒì„±

import os
import boto3
from pathlib import Path
from typing import List, Optional

class ObjectStorageManager:
    """Naver Cloud Platform Object Storage ê´€ë¦¬ í´ë˜ìŠ¤"""
    
    def __init__(self):
        self.s3 = boto3.client(
            's3',
            endpoint_url='https://kr.object.ncloudstorage.com',
            aws_access_key_id=os.environ.get('NCP_ACCESS_KEY'),
            aws_secret_access_key=os.environ.get('NCP_SECRET_KEY'),
            region_name='kr-standard'
        )
        self.bucket = os.environ.get('NCP_BUCKET', 'dm-obs')
    
    def upload_file(self, local_path: str, s3_key: str) -> bool:
        """íŒŒì¼ ì—…ë¡œë“œ"""
        try:
            self.s3.upload_file(local_path, self.bucket, s3_key)
            return True
        except Exception as e:
            print(f"Upload error: {e}")
            return False
    
    def download_file(self, s3_key: str, local_path: str) -> bool:
        """íŒŒì¼ ë‹¤ìš´ë¡œë“œ"""
        try:
            os.makedirs(os.path.dirname(local_path), exist_ok=True)
            self.s3.download_file(self.bucket, s3_key, local_path)
            return True
        except Exception as e:
            print(f"Download error: {e}")
            return False
    
    def delete_file(self, s3_key: str) -> bool:
        """íŒŒì¼ ì‚­ì œ"""
        try:
            self.s3.delete_object(Bucket=self.bucket, Key=s3_key)
            return True
        except Exception as e:
            print(f"Delete error: {e}")
            return False
    
    def list_objects(self, prefix: str = '') -> List[dict]:
        """ê°ì²´ ëª©ë¡ ì¡°íšŒ"""
        objects = []
        try:
            response = self.s3.list_objects_v2(
                Bucket=self.bucket,
                Prefix=prefix
            )
            if 'Contents' in response:
                objects = response['Contents']
        except Exception as e:
            print(f"List error: {e}")
        return objects
    
    def get_url(self, s3_key: str) -> str:
        """ê³µê°œ URL ìƒì„±"""
        return f"https://kr.object.ncloudstorage.com/{self.bucket}/{s3_key}"
```

#### ì‘ì—… 2: ë§¤ë‰´ì–¼ ì—…ë¡œë“œ API ìˆ˜ì •
```python
# web/routers/admin/manual.py ìˆ˜ì •

from fastapi import UploadFile
from web.utils.object_storage import ObjectStorageManager

obs = ObjectStorageManager()

@router.post("/manual")
async def upload_manual(
    product_id: int,
    file: UploadFile
):
    # 1. ì„ì‹œ íŒŒì¼ë¡œ ì €ì¥
    temp_path = f"/tmp/{file.filename}"
    with open(temp_path, "wb") as f:
        content = await file.read()
        f.write(content)
    
    # 2. Object Storage ì—…ë¡œë“œ
    s3_key = f"manuals/{product_id}/{file.filename}"
    success = obs.upload_file(temp_path, s3_key)
    
    if not success:
        raise HTTPException(status_code=500, detail="Upload failed")
    
    # 3. DB ì €ì¥
    manual = Manual(
        product_id=product_id,
        file_name=file.filename,
        file_path=s3_key,  # Object Storage ê²½ë¡œ
        file_size=os.path.getsize(temp_path)
    )
    db.add(manual)
    db.commit()
    
    # 4. ì„ì‹œ íŒŒì¼ ì‚­ì œ
    os.remove(temp_path)
    
    return {"message": "Manual uploaded successfully"}
```

#### ì‘ì—… 3: ì´ë¯¸ì§€ ì—…ë¡œë“œ API ìˆ˜ì •
```python
# web/routers/admin/image.py ìˆ˜ì •

@router.post("/image/normal")
async def upload_normal_images(
    product_id: int,
    files: List[UploadFile]
):
    results = []
    
    for file in files:
        # 1. ì„ì‹œ íŒŒì¼ë¡œ ì €ì¥
        temp_path = f"/tmp/{file.filename}"
        with open(temp_path, "wb") as f:
            content = await file.read()
            f.write(content)
        
        # 2. Object Storage ì—…ë¡œë“œ
        s3_key = f"images/normal/{product_id}/{file.filename}"
        success = obs.upload_file(temp_path, s3_key)
        
        if success:
            # 3. DB ì €ì¥
            image = Image(
                product_id=product_id,
                image_type='normal',
                file_name=file.filename,
                file_path=s3_key,
                file_size=os.path.getsize(temp_path)
            )
            db.add(image)
            results.append({"filename": file.filename, "status": "success"})
        else:
            results.append({"filename": file.filename, "status": "failed"})
        
        # 4. ì„ì‹œ íŒŒì¼ ì‚­ì œ
        os.remove(temp_path)
    
    db.commit()
    return {"results": results}
```

### 7.4 ë‹¤ìŒ ë‹¨ê³„ (Phase 2)

Phase 1 ì™„ë£Œ í›„ ì¦‰ì‹œ Phase 2ë¡œ ì§„í–‰:

1. **CLIP ì„ë² ë”© ì¬êµ¬ì¶•** (3.9)
   - ì˜ì¡´ì„±: Object Storage ì—°ë™ ì™„ë£Œ í•„ìˆ˜
   - ì˜ˆìƒ ì†Œìš”: 2ì¼

2. **PatchCore ë©”ëª¨ë¦¬ë±…í¬ ìƒì„±** (3.10)
   - ì˜ì¡´ì„±: CLIP ì¬êµ¬ì¶• ì™„ë£Œ ê¶Œì¥
   - ì˜ˆìƒ ì†Œìš”: 1.5ì¼

### 7.5 ìš”ì•½

**Phase 1 í˜„í™©**:
- âœ… ì™„ë£Œ: ì œí’ˆ ê´€ë¦¬, ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬, DB ì—°ë™, ë ˆì´ì•„ì›ƒ
- âš ï¸ ë¶€ë¶„ ì™„ë£Œ: ë§¤ë‰´ì–¼ ê´€ë¦¬, ì´ë¯¸ì§€ ê´€ë¦¬
- â¬œ ë¯¸ì™„ë£Œ: Object Storage ì—°ë™, ZIP ì—…ë¡œë“œ

**Phase 1 ì™„ë£Œë¥¼ ìœ„í•œ ì˜ˆìƒ ì¶”ê°€ ì‘ì—… ì‹œê°„**: 1ì¼
- Object Storage ìœ í‹¸ë¦¬í‹°: 0.5ì¼
- API ì—°ë™ ìˆ˜ì •: 0.5ì¼

**ê¶Œì¥ ë‹¤ìŒ ì‘ì—…**:
1. Object Storage ìœ í‹¸ë¦¬í‹° êµ¬í˜„ (ìµœìš°ì„ )
2. ë§¤ë‰´ì–¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ì—°ë™
3. ì´ë¯¸ì§€ ì—…ë¡œë“œ ì—°ë™
4. Phase 2 ì‹œì‘



---

## ë¶€ë¡: ê¸°ìˆ  ìŠ¤íƒ ë° ê°œë°œ í™˜ê²½

### ê¸°ìˆ  ìŠ¤íƒ
- **Backend**: FastAPI, Python 3.9
- **Frontend**: HTML, JavaScript, CSS
- **Database**: MariaDB 10.5+
- **Storage**: Naver Cloud Platform Object Storage (S3 í˜¸í™˜)
- **AI/ML**: 
  - CLIP (ViT-B-32)
  - PatchCore (WideResNet50)
  - LangChain + FAISS (RAG)
  - Anthropic Claude API
- **Infrastructure**: 
  - Naver Cloud Platform
  - Rocky Linux 8.10
  - Tesla T4 GPU

### ê°œë°œ í™˜ê²½
- **ì„œë²„**: 10.200.3.x (Private Subnet)
- **ALB**: http://dm-alb-112319279-991b4e0889c4.kr.lb.naverncp.com:80
- **í¬íŠ¸**: 8080 (FastAPI), 80 (ALB)
- **DB**: MariaDB (dmillion ê³„ì •)
- **Object Storage**: 
  - Endpoint: https://kr.object.ncloudstorage.com
  - Bucket: {NCP_BUCKET}

### ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
llm_chal_vlm/
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .vscode/
â”œâ”€â”€ Markdown/                          # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”‚   â”œâ”€â”€ admin_development_scope_v3.md
â”‚   â”œâ”€â”€ database_schema.md
â”‚   â”œâ”€â”€ project_status.md
â”‚   â”œâ”€â”€ session_handover.md
â”‚   â”œâ”€â”€ system_architecture.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ admin/                             # ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ docs/                              # ì¶”ê°€ ë¬¸ì„œ
â”œâ”€â”€ llm_server/                        # LLM ì„œë²„ ê´€ë ¨
â”œâ”€â”€ manual_store/                      # ë§¤ë‰´ì–¼ ì €ì¥ì†Œ
â”œâ”€â”€ modules/                           # í•µì‹¬ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ patchCore/                     # PatchCore ëª¨ë“ˆ
â”‚   â”œâ”€â”€ similarity_matcher.py          # CLIP ìœ ì‚¬ë„ ë§¤ì¹­
â”‚   â”œâ”€â”€ anomaly_detector.py            # ì´ìƒ ê²€ì¶œ
â”‚   â””â”€â”€ vlm/                           # VLM/LLM ê´€ë ¨
â”œâ”€â”€ object_storage/                    # Object Storage í…ŒìŠ¤íŠ¸
â”œâ”€â”€ regacy/                            # ë ˆê±°ì‹œ ì½”ë“œ
â”œâ”€â”€ results/                           # ê²°ê³¼ ì €ì¥
â””â”€â”€ web/                               # ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ â­
    â”œâ”€â”€ api_server.py                  # FastAPI ë©”ì¸ ì„œë²„
    â”œâ”€â”€ matching.html                  # (ë ˆê±°ì‹œ)
    â”œâ”€â”€ defect_mapping.json            # ë¶ˆëŸ‰ ë§¤í•‘ ì„¤ì •
    â”œâ”€â”€ requirements.txt
    â”œâ”€â”€ README.md
    â”‚
    â”œâ”€â”€ routers/                       # API ë¼ìš°í„°
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ admin/                     # âœ… ê´€ë¦¬ì API
    â”‚   â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”‚   â”œâ”€â”€ dashboard.py           # ëŒ€ì‹œë³´ë“œ
    â”‚   â”‚   â”œâ”€â”€ product.py             # ì œí’ˆ ê´€ë¦¬
    â”‚   â”‚   â”œâ”€â”€ manual.py              # ë§¤ë‰´ì–¼ ê´€ë¦¬
    â”‚   â”‚   â”œâ”€â”€ defect_type.py         # ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬
    â”‚   â”‚   â””â”€â”€ image.py               # ì´ë¯¸ì§€ ê´€ë¦¬
    â”‚   â”œâ”€â”€ anomaly.py                 # ì´ìƒ ê²€ì¶œ API (ì‘ì—…ì)
    â”‚   â”œâ”€â”€ auth.py                    # ì¸ì¦
    â”‚   â”œâ”€â”€ manual.py                  # ë§¤ë‰´ì–¼ API (ì‘ì—…ì)
    â”‚   â”œâ”€â”€ search.py                  # ê²€ìƒ‰ API (ì‘ì—…ì)
    â”‚   â””â”€â”€ upload.py                  # ì—…ë¡œë“œ API (ì‘ì—…ì)
    â”‚
    â”œâ”€â”€ pages/                         # HTML í˜ì´ì§€
    â”‚   â”œâ”€â”€ admin.html                 # ê´€ë¦¬ì ë©”ì¸
    â”‚   â”œâ”€â”€ admin/                     # âœ… ê´€ë¦¬ì í˜ì´ì§€
    â”‚   â”‚   â”œâ”€â”€ admin_layout.html      # ë ˆì´ì•„ì›ƒ
    â”‚   â”‚   â”œâ”€â”€ dashboard.html         # ëŒ€ì‹œë³´ë“œ
    â”‚   â”‚   â”œâ”€â”€ admin_product.html     # ì œí’ˆ ê´€ë¦¬
    â”‚   â”‚   â”œâ”€â”€ admin_manual.html      # ë§¤ë‰´ì–¼ ê´€ë¦¬
    â”‚   â”‚   â”œâ”€â”€ admin_defect_type.html # ë¶ˆëŸ‰ ìœ í˜• ê´€ë¦¬
    â”‚   â”‚   â”œâ”€â”€ admin_image_normal.html # ì •ìƒ ì´ë¯¸ì§€
    â”‚   â”‚   â””â”€â”€ admin_image_defect.html # ë¶ˆëŸ‰ ì´ë¯¸ì§€
    â”‚   â”œâ”€â”€ login.html                 # ë¡œê·¸ì¸
    â”‚   â”œâ”€â”€ upload.html                # ì—…ë¡œë“œ (ì‘ì—…ì)
    â”‚   â”œâ”€â”€ search.html                # ê²€ìƒ‰ (ì‘ì—…ì)
    â”‚   â”œâ”€â”€ anomaly.html               # ì´ìƒ ê²€ì¶œ (ì‘ì—…ì)
    â”‚   â””â”€â”€ manual.html                # ë§¤ë‰´ì–¼ (ì‘ì—…ì)
    â”‚
    â”œâ”€â”€ static/                        # ì •ì  íŒŒì¼
    â”‚   â”œâ”€â”€ admin/                     # âš ï¸ adminìš© ì •ì  íŒŒì¼ (í™•ì¸ í•„ìš”)
    â”‚   â”œâ”€â”€ css/
    â”‚   â”‚   â””â”€â”€ (CSS íŒŒì¼ë“¤)
    â”‚   â””â”€â”€ js/                        # JavaScript
    â”‚       â”œâ”€â”€ common.js              # ê³µí†µ í•¨ìˆ˜
    â”‚       â”œâ”€â”€ upload.js              # ì—…ë¡œë“œ (ì‘ì—…ì)
    â”‚       â”œâ”€â”€ search.js              # ê²€ìƒ‰ (ì‘ì—…ì)
    â”‚       â”œâ”€â”€ anomaly.js             # ì´ìƒ ê²€ì¶œ (ì‘ì—…ì)
    â”‚       â”œâ”€â”€ manual.js              # ë§¤ë‰´ì–¼ (ì‘ì—…ì)
    â”‚       â””â”€â”€ matching.js            # ë§¤ì¹­ (ì‘ì—…ì)
    â”‚
    â”œâ”€â”€ database/                      # âœ… DB ì—°ë™
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ connection.py              # MariaDB ì—°ê²°
    â”‚   â”œâ”€â”€ models.py                  # SQLAlchemy ëª¨ë¸
    â”‚   â””â”€â”€ crud.py                    # CRUD í•¨ìˆ˜
    â”‚
    â””â”€â”€ utils/                         # âœ… ìœ í‹¸ë¦¬í‹°
        â”œâ”€â”€ __init__.py
        â”œâ”€â”€ auth.py                    # ì¸ì¦ ìœ í‹¸
        â””â”€â”€ object_storage.py          # âœ… Object Storage ìœ í‹¸ (êµ¬í˜„ ì™„ë£Œ!)
```

---

**ê²€í† ì**: dhkim  
**ìŠ¹ì¸ì¼**: 2025-11-14
**ë²„ì „**: 3.1
